{"version":3,"sources":["state/actions.js","state/actionTypes.js","history.js","state/reducer.js","components/icons/search.js","components/search-opener.js","components/search-suggestions.js","components/ui/icon-button.js","components/icons/remove.js","components/icons/geolocalize.js","components/search-box.js","components/results-number.js","components/icons/arrowDown.js","components/icons/circleRemove.js","components/filter-panel.js","components/icons/arrowRight.js","components/icons/phone.js","components/stores-list.js","components/icons/leftArrow.js","components/icons/mail.js","components/store-details.js","components/left-panel.js","vendor/marker-clusterer.js","components/stores-map.js","App.js","serviceWorker.js","data/dataDecoder.js","index.js","state/state.js"],"names":["updateSearchTermAction","searchTerm","type","openStoreDetailsAction","store","keysMap","store-type","action","storeTypes","formatValue","value","split","search","keys","Object","setRoute","key","keyAndValueRegEx","RegExp","concat","join","window","location","hash","replace","separatorChar","length","route","history","pushState","setStoreVisibilityBySearchTerm","visible","some","locationBit","toLowerCase","includes","setStoreVisibilityByFilters","filters","storeType","id","reducer","state","objectSpread","stores","map","locations","ui","filterPanelOpen","updatedFilters","storeTypeIds","storeTypeId","filter","openedStore","coords","center","lat","lng","ne","sw","coordinates","searchLayerOpen","react_default","a","createElement","className","xmlns","x","y","width","height","viewBox","fill","strokeWidth","strokeMiterlimit","cx","cy","r","x1","y1","x2","y2","transform","stroke","SearchOpener","toggleSearchLayer","this","props","onClick","Component","connect","dispatch","SearchSuggestions","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","oldSuggestions","_this$props","updateSearchTerm","suggestions","name","thereAreSuggestions","Boolean","suggestionsToRender","style","display","suggestion","i","icon_button","_ref","icon","label","clickHandler","cssClass","remove","geolocalize","version","d","SeachBox","htmlFor","placeholder","onInput","ev","handleInput","search_suggestions","RemoveIcon","handleReset","cssclassName","GeolocalizeIcon","target","ResultsNumber","numebrOfSelectedStores","text","arrowDown","strokeLinejoin","points","circleRemove","FilterPanel","selectedStoreTypesId","toggleFilterPanel","toggleStoreType","resetStoreTypes","isActive","resetStoreTypesAction","arrowRight","phone","StoresList","openStoreDetails","index","borderTop","borderBottom","padding","justifyContent","leftArrow","cssClasses","mail","RenderStore","href","productCategory","category","hasMadeToMeasure","hasTailoring","gifCardAccepted","hasWiFi","reserveInStore","pickUpInStore","returnInStore","clickFromStore","bookable","StoreDetails","closeStoreDetails","store_details_RenderStore","LeftPanel","touchStart","_this2","onTouchStart","setState","touches","clientX","onTouchEnd","changedTouches","search_box","results_number","filter_panel","stores_list","store_details","ClusterIcon","cluster","styles","getMarkerClusterer","extend","google","maps","OverlayView","cluster_","className_","getClusterClass","styles_","center_","div_","sums_","visible_","setMap","getMap","Cluster","mc","markerClusterer_","map_","gridSize_","getGridSize","minClusterSize_","getMinimumClusterSize","averageCenter_","getAverageCenter","markers_","bounds_","clusterIcon_","getStyles","MarkerClusterer","opt_markers","opt_options","clusters_","listeners_","activeMap_","ready_","gridSize","minimumClusterSize","maxZoom_","maxZoom","title_","title","zoomOnClick_","undefined","zoomOnClick","averageCenter","ignoreHidden_","ignoreHidden","enableRetinaIcons_","enableRetinaIcons","imagePath_","imagePath","IMAGE_PATH","imageExtension_","imageExtension","IMAGE_EXTENSION","imageSizes_","imageSizes","IMAGE_SIZES","calculator_","calculator","CALCULATOR","batchSize_","batchSize","BATCH_SIZE","batchSizeIE_","batchSizeIE","BATCH_SIZE_IE","clusterClass_","clusterClass","navigator","userAgent","indexOf","setupStyles_","addMarkers","prototype","onAdd","cMouseDownInCluster","cDraggingMapByCluster","cClusterIcon","gmVersion","parseInt","document","show","getPanes","overlayMouseTarget","appendChild","boundsChangedListener_","event","addListener","addDomListener","e","stopPropagation","theBounds","mz","trigger","getZoomOnClick","getMaxZoom","getBounds","fitBounds","setTimeout","getZoom","setZoom","cancelBubble","onRemove","parentNode","hide","removeListener","clearInstanceListeners","removeChild","draw","pos","getPosFromLatLng_","top","left","zIndex","Marker","MAX_ZINDEX","img","bp","backgroundPosition_","spriteH","spriteV","cssText","createCss","url_","width_","height_","innerHTML","anchorText_","textColor_","textSize_","fontFamily_","fontWeight_","fontStyle_","textDecoration_","getTitle","useStyle","sums","Math","max","min","url","anchorText","anchorIcon_","anchorIcon","textColor","textSize","textDecoration","fontWeight","fontStyle","fontFamily","backgroundPosition","setCenter","push","latlng","getProjection","fromLatLngToDivPixel","getSize","getMarkers","getCenter","bounds","LatLngBounds","markers","getPosition","addMarker","marker","mCount","isMarkerAlreadyAdded_","l","LatLng","calculateBounds_","isAdded","updateIcon_","isMarkerInClusterBounds","contains","getExtendedBounds","numStyles","getCalculator","cMarkerClusterer","repaint","prevZoom_","zoom","minZoom","mapTypes","getMapTypeId","resetViewport_","bind","redraw_","size","fitMapToMarkers","getVisible","getIgnoreHidden","setGridSize","setMinimumClusterSize","setMaxZoom","setStyles","setTitle","setZoomOnClick","setAverageCenter","setIgnoreHidden","getEnableRetinaIcons","setEnableRetinaIcons","getImageExtension","setImageExtension","getImagePath","setImagePath","getImageSizes","setImageSizes","setCalculator","getBatchSizeIE","setBatchSizeIE","setClusterClass","getTotalMarkers","getClusters","getTotalClusters","opt_nodraw","pushMarkerTo_","hasOwnProperty","getDraggable","removeMarker","removed","removeMarker_","removeMarkers","splice","clearMarkers","oldClusters","slice","projection","tr","getNorthEast","bl","getSouthWest","trPix","blPix","fromDivPixelToLatLng","createClusters_","opt_hide","distanceBetweenPoints_","p1","p2","dLat","PI","dLon","sin","cos","atan2","sqrt","isMarkerInBounds_","addToClosestCluster_","distance","clusterToAddTo","iFirst","mapBounds","timerRefStatic","clearTimeout","iLast","obj1","obj2","object","property","apply","count","toString","dv","StoresMap","myRef","React","createRef","styleNode","textContent","current","mapElement","classList","initGoogleMap","init","googleMapsJsNode","src","Map","fullscreenControl","mapTypeControl","streetViewControl","elementType","stylers","color","visibility","featureType","zoomControl","zoomControlOptions","ZoomControlStyle","SMALL","bindEvents","position","Number","post_title","markerCluster","resetMarkers","setMarkers","ref","App","search_opener","left_panel","stores_map","hostname","match","toBoolean","numberAsstring","createStore","resultPanelOpen","continent","country","city","applyMiddleware","thunkMiddleware","ReactDOM","render","react_redux_es","src_App_0","getElementById","serviceWorker","ready","then","registration","unregister","fetch","response","json","storesJson","String","ID","address","geolocationAddress","mails","brand","classification","isFlagship","checkAvailability","gender","term_id","loadStoresAction","storeTypesJson","terms","loadStoreTypesAction","locationsJson","loadLocationsAction"],"mappings":"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","file":"static/js/main.8fa318a2.chunk.js","sourcesContent":["import {\n    LOAD_STORES,\n    LOAD_STORE_TYPES,\n    LOAD_LOCATIONS,\n    UPDATE_SEARCH_TERM,\n    TOGGLE_FILTER_PANEL,\n    SET_STORE_TYPES,\n    RESET_STORE_TYPES,\n    TOGGLE_STORE_TYPE,\n    OPEN_STORE_DETAILS,\n    TOGGLE_SEARCH_LAYER,\n} from './actionTypes.js';\n\nexport const loadStoresAction = (stores) => ({ type: LOAD_STORES, stores });\n\nexport const loadStoreTypesAction = (storeTypes) => ({ type: LOAD_STORE_TYPES, storeTypes });\n\nexport const loadLocationsAction = (locations) => ({ type: LOAD_LOCATIONS, locations });\n\nexport const updateSearchTermAction = (searchTerm) => ({ type: UPDATE_SEARCH_TERM, searchTerm });\n\nexport const toggleFilterPanelAction = () => ({ type: TOGGLE_FILTER_PANEL });\n\nexport const setStoreTypesAction = (storeTypes) => ({ type: SET_STORE_TYPES, storeTypes });\n\nexport const toggleStoreTypeAction = (storeTypeId) => ({ type: TOGGLE_STORE_TYPE, storeTypeId});\n\nexport const resetStoreTypesAction = () => ({ type: RESET_STORE_TYPES });\n\nexport const openStoreDetailsAction = (store) => ({type: OPEN_STORE_DETAILS, store});\n\nexport const toggleSearchLayerAction = () => ({type: TOGGLE_SEARCH_LAYER});","export const LOAD_STORES = 'LOAD_STORES';\n\nexport const LOAD_STORE_TYPES = 'LOAD_STORE_TYPES';\n\nexport const LOAD_LOCATIONS = 'LOAD_LOCATIONS';\n\nexport const UPDATE_SEARCH_TERM = 'UPDATE_SEARCH_TERM';\n\nexport const TOGGLE_FILTER_PANEL = 'TOGGLE_FILTER_PANEL';\n\nexport const SET_STORE_TYPES = 'SET_STORE_TYPES';\n\nexport const TOGGLE_STORE_TYPE = 'TOGGLE_STORE_TYPE';\n\nexport const RESET_STORE_TYPES = 'RESET_FILTERS';\n\nexport const OPEN_STORE_DETAILS = 'OPEN_STORE_DETAILS';\n\nexport const UPDATE_COORDS = \"UPDATE_COORDS\";\n\nexport const TOGGLE_SEARCH_LAYER = 'TOGGLE_SEARCH_LAYER';","\nimport { \n    setStoreTypesAction,\n    updateSearchTermAction,\n} from './state/actions.js';\n\nconst keysMap = {\n    'store-type': {\n        action: setStoreTypesAction,\n        formatValue: (value) => value[0].split(','),\n    }, \n    'search': {\n        action: updateSearchTermAction,\n        formatValue: (value) => value[0],\n    }\n}\n\nconst keys = Object.keys(keysMap);\n\nexport function setRoute(key, value) {\n    var keyAndValueRegEx = new RegExp(`(${key}/.+)(${keys.join('|')})?`);\n    window.location.hash = window.location.hash.replace(keyAndValueRegEx, '$2');\n    if (window.location.hash === '#') {\n        window.location.hash = '';\n    }\n    const separatorChar = window.location.hash.length ? '/' : '#';\n    const route = value.length ? `${window.location.hash}${separatorChar}${key}/${value}` : '';\n\n    window.history.pushState({}, '', route);\n}\n\nexport function decodeRoute() {\n    const segments = window.location.hash.slice(1).split('/');\n    \n\n    keys.forEach((key) => {\n        if (segments.includes(key)) {\n            const segmentsAfterKey = segments.slice(segments.indexOf(key) + 1);\n            const nextKeyIndex = keys.map((key) => segmentsAfterKey.indexOf(key)).filter((index) => index > -1).sort()[0] || segmentsAfterKey.length;\n            const value = segmentsAfterKey.slice(0, nextKeyIndex)\n            if (value.length) {\n                //dispatch(keysMap[key].action(keysMap[key].formatValue(value)));\n            }\n        }\n    })\n}","import {\n    LOAD_STORES,\n    LOAD_STORE_TYPES,\n    LOAD_LOCATIONS,\n    OPEN_STORE_DETAILS,\n    RESET_STORE_TYPES,\n    SET_STORE_TYPES,\n    TOGGLE_FILTER_PANEL,\n    TOGGLE_STORE_TYPE,\n    UPDATE_COORDS,\n    UPDATE_SEARCH_TERM,\n    TOGGLE_SEARCH_LAYER,\n} from './actionTypes.js';\nimport { setRoute } from '../history.js';\n\nfunction setStoreVisibilityBySearchTerm(searchTerm) {\n    return function (store) {\n        store.visible = store.location.some((locationBit) => locationBit.toLowerCase().includes(searchTerm.toLowerCase()));\n        \n        return store;\n    }\n}\n\nfunction setStoreVisibilityByFilters(filters) {\n    return function (store) {\n        store.visible = !filters.storeTypes.length || store.storeTypes.some((storeType) => filters.storeTypes.includes(storeType.id));\n        \n        return store;\n    }\n}\n\nfunction setStoreVisibilityByCoords(ne, sw) {\n    return function (store) {\n        store.visible = ne.lat >= store.lat && store.lat >= sw.lat && ne.lng >= store.lng && store.lng >= sw.lng;\n\n        return store;\n    }\n}\n\nfunction toggleStoreType(storeTypeIds, storeTypeId) {\n    return storeTypeIds.includes(storeTypeId) ?\n        storeTypeIds.filter((id) => id !== storeTypeId)\n        : storeTypeIds.concat(storeTypeId)\n    ;\n}\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case LOAD_STORES:\n            return {\n                ...state,\n                stores: action.stores.map(setStoreVisibilityByFilters(state.filters)).map(setStoreVisibilityBySearchTerm(state.searchTerm))\n            };\n\n        case LOAD_STORE_TYPES:\n            return {\n                ...state,\n                storeTypes: action.storeTypes\n            };\n\n        case LOAD_LOCATIONS:\n            return {\n                ...state,\n                locations: action.locations\n            };\n\n        case UPDATE_SEARCH_TERM:\n            return {\n                ...state,\n                searchTerm: action.searchTerm,\n                stores: state.stores.map(setStoreVisibilityBySearchTerm(action.searchTerm))\n            }\n\n        case TOGGLE_FILTER_PANEL:\n            return {\n                ...state,\n                ui: {\n                    ...state.ui,\n                    filterPanelOpen: !state.ui.filterPanelOpen,\n                }\n            }\n\n        case SET_STORE_TYPES:\n            {\n                const updatedFilters = {\n                    ...state.filters,\n                    storeTypes: action.storeTypes,\n                };\n                return {\n                    ...state,\n                    stores: state.stores.map(setStoreVisibilityByFilters(updatedFilters)),\n                    filters: updatedFilters,\n                }\n            }\n\n        case TOGGLE_STORE_TYPE:\n            {\n                const updatedFilters = {\n                    ...state.filters,\n                    storeTypes: toggleStoreType(state.filters.storeTypes, action.storeTypeId),\n                };\n                setRoute('store-type', updatedFilters.storeTypes.join(','));\n                return {\n                    ...state,\n                    stores: state.stores.map(setStoreVisibilityByFilters(updatedFilters)),\n                    filters: updatedFilters,\n                }\n            }\n\n        case RESET_STORE_TYPES:\n            {\n                const updatedFilters = {\n                    ...state.filters,\n                    storeTypes: [],\n                };\n                setRoute('store-type', '');\n                return {\n                    ...state,\n                    stores: state.stores.map(setStoreVisibilityByFilters(updatedFilters)),\n                    filters: updatedFilters,\n                }\n            }\n\n        case OPEN_STORE_DETAILS:\n            return {\n                ...state,\n                openedStore: action.store,\n            }\n\n        case UPDATE_COORDS:\n            setRoute('coords', '');\n            setRoute('coords', `${action.coords.center.lat},${action.coords.center.lng}/ne/${action.coords.ne.lat},${action.coords.ne.lng}/sw/${action.coords.sw.lat},${action.coords.sw.lng}`);\n\n            return {\n                ...state,\n                coordinates: action.coords,\n                stores: state.stores.map(setStoreVisibilityByCoords(action.coords.ne, action.coords.sw))\n            }\n\n        case TOGGLE_SEARCH_LAYER:\n            return {\n                ...state,\n                ui: {\n                    ...state.ui,\n                    searchLayerOpen: !state.ui.searchLayerOpen\n                }\n            }\n\n        default:\n            return state;\n    }\n}\n\nexport default reducer;","import React from 'react';\n\nexport default () => ( \n<svg className=\"searchIcon\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\">\n    <g>\n        <circle fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\" cx=\"21\" cy=\"21\" r=\"20\"/>\n        <line fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\" x1=\"35\" y1=\"35\" x2=\"41\" y2=\"41\"/>\n        <rect x=\"46.257\" y=\"37.065\" transform=\"matrix(-0.7071 0.7071 -0.7071 -0.7071 121.9178 50.5)\" fill=\"none\" stroke=\"#000000\" strokeWidth=\"2\" strokeMiterlimit=\"10\" width=\"8.485\" height=\"26.87\"/>\n    </g>\n</svg>)","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport { toggleSearchLayerAction } from '../state/actions.js';\nimport SearchIcon from './icons/search.js';\n\nconst mapStateToProps = (state) => ({});\n\nconst mapDispatchToProps = (dispatch) => ({\n    toggleSearchLayer: () => dispatch(toggleSearchLayerAction()),\n});\n\nclass SearchOpener extends Component {\n    render() {\n        const {toggleSearchLayer} = this.props;\n\n        return (<button className=\"searchOpener\" onClick={() => toggleSearchLayer()}>\n            <span className=\"icon\"><SearchIcon /></span>\n            <span className=\"text visuallyHidden\">Search</span>\n        </button>);\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchOpener);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport {\n    updateSearchTermAction,\n} from '../state/actions.js';\n\nconst mapStateToProps = (state) => ({\n    searchTerm: state.searchTerm,\n    locations: state.locations,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    updateSearchTerm: (suggestion) => dispatch(updateSearchTermAction(suggestion)),\n});\n\nclass SearchSuggestions extends Component {\n    constructor(props) {\n        super(props);\n        this.oldSuggestions = [];\n    }\n    \n    render() {\n        const {searchTerm, locations, updateSearchTerm} = this.props;\n        const suggestions = searchTerm.length > 2 ? locations.filter((location) => location.name.toLowerCase().includes(searchTerm.toLowerCase())) : [];\n        const thereAreSuggestions = Boolean(suggestions.length);\n        const suggestionsToRender = thereAreSuggestions ? suggestions : this.oldSuggestions;\n        this.oldSuggestions = suggestions;\n        \n        return (<ul style={{display: `${thereAreSuggestions ? 'block' : 'none'}`}}>\n                {suggestionsToRender\n                    .map((suggestion, i) => \n                        <li key={i} onClick={() => updateSearchTerm(suggestion.name)}>{suggestion.name}</li>\n                    )}\n            </ul>);\n    }    \n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchSuggestions);","import React from 'react';\n\nexport default ({icon, label, clickHandler, cssClass}) => (\n<button className={`iconButton${cssClass? ' ' + cssClass : ''}`} onClick={clickHandler}>\n    <span className=\"icon\">{icon()}</span>\n    <span className=\"visuallyHidden\">{label}</span>\n</button>);","import React from 'react';\n\nexport default () => (\n<svg width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" >\n    <g>\n        <line fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\" x1=\"18.947\" y1=\"17.153\" x2=\"45.045\" y2=\"43.056\"/>\n    </g>\n    <g>\n        <line fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\" x1=\"19.045\" y1=\"43.153\" x2=\"44.947\" y2=\"17.056\"/>\n    </g>\n</svg>);","import React from 'react';\n\nexport default () => ( \n<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" >\n    <g>\n        <circle fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\" cx=\"32\" cy=\"22\" r=\"6\"/>\n        <path fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\" d=\"M53,22.735C52.948,10.73,43.599,1,32,1s-21,9.73-21,21.735C11,38.271,31.965,63,31.965,63S53.069,38.271,53,22.735z\"/>\n    </g>\n</svg>);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport { \n    updateSearchTermAction \n} from '../state/actions.js';\n\nimport SearchSuggestions from './search-suggestions.js';\nimport IconButton from './ui/icon-button.js';\nimport SearchIcon from './icons/search.js';\nimport RemoveIcon from './icons/remove.js';\nimport GeolocalizeIcon from './icons/geolocalize.js';\n\n\nconst mapStateToProps = (state) => ({});\n\nconst mapDispatchToProps = (dispatch) => ({\n    updateSearchTerm: (searchTerm) => dispatch(updateSearchTermAction(searchTerm)),\n});\n\nclass SeachBox extends Component {\n    render() {\n        const {searchTerm} = this.props;\n\n        return (\n        <div className=\"SearchBox\">\n            <div className=\"searchInputAndButtons\">\n                <label htmlFor=\"searchInput\" className=\"visuallyHidden\">Cerca un negozio</label>\n                <div className=\"searchInputAndIcons\">\n                    <SearchIcon/>\n                    <div className=\"searchInput\">\n                        <input \n                            id=\"searchInput\" \n                            type=\"text\" \n                            placeholder=\"Inserisci una località\" \n                            onInput={(ev) => this.handleInput(ev)}\n                            value={searchTerm}\n                        />\n                        <SearchSuggestions/>\n                    </div>\n                    <IconButton\n                        icon={RemoveIcon} \n                        label=\"clear search\" \n                        clickHandler={(ev) => this.handleReset(ev)} \n                        cssclassName=\"clearSearch\"\n                    />\n                </div>\n                <IconButton\n                    icon={GeolocalizeIcon} \n                    label=\"geolocate me\" \n                    clickHandler={(ev => this.handleReset(ev))} \n                    cssclassName=\"btn geolocalizeIcon\"\n                />\n            </div>\n        </div>);\n    }\n    \n    handleInput(ev) {\n        this.props.updateSearchTerm(ev.target.value);\n    }\n\n    handleReset() {\n        this.props.updateSearchTerm('');\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SeachBox);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nconst mapStateToProps = (state) => ({\n    stores: state.stores,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n});\n\n\nclass ResultsNumber extends Component {\n    render() {\n        const {stores} = this.props;\n        const numebrOfSelectedStores = stores.filter((store) => store.visible).length;\n        let text = 'No store found, check che search query';\n        \n        switch (numebrOfSelectedStores) {\n            case 1:\n                text = '1 store found';\n                break;\n            \n            default:\n                text = `${numebrOfSelectedStores} stores found`;\n                break;\n        }\n\n        return (<div className=\"resultsNumber\">\n            <div>{text}</div>\n        </div>);\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ResultsNumber);","import React from 'react';\n\nexport default () => (<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" >\n     <g>\n         <polyline fill=\"none\" strokeWidth=\"2\" strokeLinejoin=\"bevel\" strokeMiterlimit=\"10\" points=\"15,24 32,41 49,24 \t\"/>\n     </g>\n</svg>);","import React from 'react';\n\nexport default () => (\n<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" >\n    <g>\n        <line fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\" x1=\"18.947\" y1=\"17.153\" x2=\"45.045\" y2=\"43.056\"/>\n    </g>\n    <g>\n        <line fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\" x1=\"19.045\" y1=\"43.153\" x2=\"44.947\" y2=\"17.056\"/>\n    </g>\n    <g>\n        <circle fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\" cx=\"32\" cy=\"32\" r=\"30.999\"/>\n    </g>\n</svg>);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { \n    toggleFilterPanelAction, \n    resetStoreTypesAction,\n    toggleStoreTypeAction,\n} from '../state/actions.js';\n\nimport ArrowDown from './icons/arrowDown.js';\nimport RemoveIcon from './icons/remove.js';\nimport CircleRemoveIcon from './icons/circleRemove.js';\n\nconst mapStateToProps = (state) => ({\n    storeTypes: state.storeTypes,\n    filterPanelOpen: state.ui.filterPanelOpen,\n    selectedStoreTypesId: state.filters.storeTypes,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    resetStoreTypes: () => dispatch(resetStoreTypesAction()),\n    toggleStoreType: (id) => dispatch(toggleStoreTypeAction(id)),\n    toggleFilterPanel: () => dispatch(toggleFilterPanelAction()),\n});\n\n\nclass FilterPanel extends Component {\n    render() {\n        const {\n            storeTypes, \n            filterPanelOpen, \n            selectedStoreTypesId, \n            toggleFilterPanel, \n            toggleStoreType, \n            resetStoreTypes\n        } = this.props;\n        \n        return (<div className=\"filterPanel\">\n            <div className=\"filter-bar_header\">\n                <button \n                    className={`filter-panel_toggleBtn${filterPanelOpen ? ' open' : ''}`} \n                    onClick={() => toggleFilterPanel()}>\n                    <span className=\"filter-panel_toggleBtn_text\">Filter results</span>\n                    <span className=\"icon filter-panel_arrow\"><ArrowDown/></span>\n                </button>\n                <button \n                    className={`btn filter-panel_resetBtn ${filterPanelOpen ? 'fade-in' : 'fade-out'}`} \n                    onClick={() => resetStoreTypes()}\n                >\n                    <span className=\"removeIcon\"><CircleRemoveIcon/></span>\n                    <span className=\"text\">reset filters</span>\n                </button>\n            </div>\n            <div>\n                <ul style={{display: `${filterPanelOpen ? 'block' : 'none'}`}}>\n                {storeTypes.map((storeType, i) => {\n                    const isActive = selectedStoreTypesId.includes(storeType.id);\n                    return (\n                        <li key={i}>\n                            <button className=\"storeTypeBtn\" \n                                onClick={() => toggleStoreType(storeType.id)}>\n                                {isActive ? <span className=\"icon\"><RemoveIcon/></span> : null}    \n                                <span className=\"text\">{storeType.name}</span>\n                            </button>\n                        </li>\n                    )\n                })}\n                </ul>\n            </div>\n        </div>);\n    }\n\n    handleReset() {\n        this.props.resetStoreTypesAction();\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FilterPanel);","import React from 'react';\n\nexport default () => (\n<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" >\n    <g>\n        <polyline fill=\"none\" strokeWidth=\"2\" strokeLinejoin=\"bevel\" strokeMiterlimit=\"10\" points=\"27,15 44,32  27,49\"/>\n    </g>\n</svg>\n);","import React from 'react';\n\nexport default () => (<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\">\n    <g>\n        <rect x=\"16\" y=\"1\" fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\" width=\"32\" height=\"62\"/>\n        <line fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\" x1=\"28\" y1=\"5\" x2=\"36\" y2=\"5\"/>\n        <line fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\" x1=\"16\" y1=\"51\" x2=\"48\" y2=\"51\"/>\n        <line fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\" x1=\"16\" y1=\"9\" x2=\"48\" y2=\"9\"/>\n        <circle fill=\"none\" strokeWidth=\"2\" strokeLinejoin=\"bevel\" strokeMiterlimit=\"10\" cx=\"32\" cy=\"57\" r=\"2\"/>\n    </g>\n</svg>);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport {\n    openStoreDetailsAction,\n} from '../state/actions.js';\nimport RightArrow from './icons/arrowRight.js';\nimport PhoneIcon from './icons/phone.js';\n\nconst mapStateToProps = (state) => ({\n    stores: state.stores,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    openStoreDetails: (store) => dispatch(openStoreDetailsAction(store))\n});\n\nclass StoresList extends Component {\n    render() {\n        const {stores, openStoreDetails} = this.props;\n        const liStyle = (index) => ({\n            borderTop: index === 0 ? ': solid 1px lightgray' : 'none',\n            borderBottom: 'solid 1px lightgray',\n            padding: '1em 0',\n            display: 'flex',\n            justifyContent: 'space-between'\n        });\n        \n        return (<ul className=\"storesList\">\n                {stores\n                    .filter((store) => store.visible)\n                    .map((store, i) => \n                        <li key={i} style={liStyle(i)} onClick={() => openStoreDetails(store)}>\n                            <div>\n                                <div className=\"storeName\">{store.name}</div>\n                                <div className=\"storePhone\">\n                                    <span className=\"icon\"><PhoneIcon/></span>\n                                    <span className=\"text\">{store.phone}</span>\n                                </div>\n                            </div>\n                            <div>\n                                <RightArrow />\n                            </div>\n                    </li>)}\n            </ul>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StoresList);","import React from 'react';\n\nexport default ({cssClasses}) => (\n<svg className={cssClasses} version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" >\n    <g>\n        <polyline fill=\"none\" strokeWidth=\"2\" strokeLinejoin=\"bevel\" strokeMiterlimit=\"10\" points=\"37,15 20,32 37,49\"/>\n    </g>\n</svg>\n);","import React from 'react';\n\nexport default () => (\n<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"64px\" height=\"64px\" viewBox=\"0 0 64 64\" >\n    <g>\n        <rect x=\"1\" y=\"13\" fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\" width=\"62\" height=\"37\"/>\n        <polyline fill=\"none\" strokeWidth=\"2\" strokeMiterlimit=\"10\" points=\"1,13 32,33 63,13 \t\"/>\n    </g>\n</svg>);","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport {\n    openStoreDetailsAction,\n} from '../state/actions.js';\n\nimport LeftArrow from './icons/leftArrow.js';\nimport PhoneIcon from './icons/phone.js';\nimport MailIcon from './icons/mail.js';\n\n\nconst mapStateToProps = (state) => ({\n    store: state.openedStore,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    closeStoreDetails: () => dispatch(openStoreDetailsAction(null))\n});\n\nconst RenderStore = ({store}) => (<div className=\"store\">\n            <div className=\"store_name\">{store.name}</div>\n            <div className=\"store_phone\">\n                <span className=\"icon\"><PhoneIcon/></span>\n                <span className=\"text\">{store.phone}</span>\n            </div>\n            <div className=\"store_mail\">\n                <span className=\"icon\"><MailIcon/></span>\n                <span className=\"text\"><a href={`mailto:${store.mail}`}>{store.mail}</a></span>\n            </div>\n            <div className=\"store_categoriesTitle\">Store categories</div>\n            <ul className=\"store_categories\">\n                {store.productCategory.map((category, i) => <li key={i}>{category.name}</li>)}\n            </ul>\n            <div className=\"store_servicesTitle\">Store services</div>\n            <ul className=\"store_services\">\n                {store.hasMadeToMeasure ? <li>Made to measure</li> : null}\n                {store.hasTailoring ? <li>Tailoring</li> : null}\n                {store.gifCardAccepted ? <li>Gift card accepted</li> : null}\n                {store.hasWiFi ? <li>Wi-Fi</li> : null}\n                {store.reserveInStore ? <li>Reserve in store</li> : null}\n                {store.pickUpInStore ? <li>Pick-up in store</li> : null}\n                {store.returnInStore ? <li>Return in store</li> : null}\n                {store.clickFromStore ? <li>Click from store</li> : null}\n                {store.bookable ? <li>Bookable</li> : null}\n            </ul>\n        </div>\n);\n\nclass StoreDetails extends Component {\n    render() {\n        const {store} = this.props;\n        \n        return(<div className={`storeDetails ${Boolean(store) ? 'slide-in-left' : 'slide-out-right'}`}>\n                <button className=\"backButton\" onClick={() => this.props.closeStoreDetails()}>\n                    <span className=\"backIcon\"><LeftArrow/></span>\n                    <span className=\"text\">close</span>\n                </button>\n                {store ? <RenderStore store={store} /> : null}\n            </div>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StoreDetails);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport { toggleSearchLayerAction } from '../state/actions.js';\n\nimport SearchBox from './search-box';\nimport ResultsNumber from './results-number';\nimport FilterPanel from './filter-panel';\nimport StoresList from './stores-list';\nimport StoreDetails from './store-details';\n\nconst mapStateToProps = (state) => ({\n    searchLayerOpen: state.ui.searchLayerOpen,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    toggleSearchLayer: () => dispatch(toggleSearchLayerAction()),\n});\n\nclass LeftPanel extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            touchStart: 0,\n        }\n    }\n\n    render() {\n        const {toggleSearchLayer, searchLayerOpen} = this.props;\n\n        return (\n            <div \n                className={`leftPanel ${searchLayerOpen ? 'open' : ''}`} \n                onTouchStart={(ev) => this.setState({touchStart: ev.touches[0].clientX})}\n                onTouchEnd={(ev) => {\n                    if (this.state.touchStart - ev.changedTouches[0].clientX > 100) {\n                        toggleSearchLayer();\n                    }\n                }}\n            >\n                <SearchBox/>\n                <ResultsNumber/>\n                <FilterPanel/>\n                <div className=\"storesAndStoreDetails\">\n                    <StoresList/>\n                    <StoreDetails/>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LeftPanel);\n","/**\n * @name MarkerClustererPlus for Google Maps V3\n * @version 2.1.11\n * @author Gary Little\n * @fileoverview\n * The library creates and manages per-zoom-level clusters for large amounts of markers.\n * <p>\n * This is an enhanced V3 implementation of the V2 MarkerClusterer by Xiaoxi Wu. It is\n * based on the V3 MarkerClusterer port by Luke Mahe. MarkerClustererPlus was created\n * by Gary Little.\n * <p>\n * v2.0 release: MarkerClustererPlus v2.0 is backward compatible with MarkerClusterer v1.0. It\n *  adds support for the <code>ignoreHidden</code>, <code>title</code>, <code>batchSizeIE</code>,\n *  and <code>calculator</code> properties as well as support for four more events. It also allows\n *  greater control over the styling of the text that appears on the cluster marker. The\n *  documentation has been significantly improved and the overall code has been simplified and\n *  polished. Very large numbers of markers can now be managed without causing Javascript timeout\n *  errors on Internet Explorer. Note that the name of the <code>clusterclick</code> event has been\n *  deprecated. The new name is <code>click</code>, so please change your application code now.\n */\n\n/**\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * @name ClusterIconStyle\n * @class This class represents the object for values in the <code>styles</code> array passed\n *  to the {@link MarkerClusterer} constructor. The element in this array that is used to\n *  style the cluster icon is determined by calling the <code>calculator</code> function.\n *\n * @property {string} url The URL of the cluster icon image file. Required.\n * @property {number} height The display height (in pixels) of the cluster icon. Required.\n * @property {number} width The display width (in pixels) of the cluster icon. Required.\n * @property {Array} [anchorText] The position (in pixels) from the center of the cluster icon to\n *  where the text label is to be centered and drawn. The format is <code>[yoffset, xoffset]</code>\n *  where <code>yoffset</code> increases as you go down from center and <code>xoffset</code>\n *  increases to the right of center. The default is <code>[0, 0]</code>.\n * @property {Array} [anchorIcon] The anchor position (in pixels) of the cluster icon. This is the\n *  spot on the cluster icon that is to be aligned with the cluster position. The format is\n *  <code>[yoffset, xoffset]</code> where <code>yoffset</code> increases as you go down and\n *  <code>xoffset</code> increases to the right of the top-left corner of the icon. The default\n *  anchor position is the center of the cluster icon.\n * @property {string} [textColor=\"black\"] The color of the label text shown on the\n *  cluster icon.\n * @property {number} [textSize=11] The size (in pixels) of the label text shown on the\n *  cluster icon.\n * @property {string} [textDecoration=\"none\"] The value of the CSS <code>text-decoration</code>\n *  property for the label text shown on the cluster icon.\n * @property {string} [fontWeight=\"bold\"] The value of the CSS <code>font-weight</code>\n *  property for the label text shown on the cluster icon.\n * @property {string} [fontStyle=\"normal\"] The value of the CSS <code>font-style</code>\n *  property for the label text shown on the cluster icon.\n * @property {string} [fontFamily=\"Arial,sans-serif\"] The value of the CSS <code>font-family</code>\n *  property for the label text shown on the cluster icon.\n * @property {string} [backgroundPosition=\"0 0\"] The position of the cluster icon image\n *  within the image defined by <code>url</code>. The format is <code>\"xpos ypos\"</code>\n *  (the same format as for the CSS <code>background-position</code> property). You must set\n *  this property appropriately when the image defined by <code>url</code> represents a sprite\n *  containing multiple images. Note that the position <i>must</i> be specified in px units.\n */\n/**\n * @name ClusterIconInfo\n * @class This class is an object containing general information about a cluster icon. This is\n *  the object that a <code>calculator</code> function returns.\n *\n * @property {string} text The text of the label to be shown on the cluster icon.\n * @property {number} index The index plus 1 of the element in the <code>styles</code>\n *  array to be used to style the cluster icon.\n * @property {string} title The tooltip to display when the mouse moves over the cluster icon.\n *  If this value is <code>undefined</code> or <code>\"\"</code>, <code>title</code> is set to the\n *  value of the <code>title</code> property passed to the MarkerClusterer.\n */\n/**\n * A cluster icon.\n *\n * @constructor\n * @extends window.google.maps.OverlayView\n * @param {Cluster} cluster The cluster with which the icon is to be associated.\n * @param {Array} [styles] An array of {@link ClusterIconStyle} defining the cluster icons\n *  to use for various cluster sizes.\n * @private\n */\nfunction ClusterIcon(cluster, styles) {\n    cluster.getMarkerClusterer().extend(ClusterIcon, window.google.maps.OverlayView);\n  \n    this.cluster_ = cluster;\n    this.className_ = cluster.getMarkerClusterer().getClusterClass();\n    this.styles_ = styles;\n    this.center_ = null;\n    this.div_ = null;\n    this.sums_ = null;\n    this.visible_ = false;\n  \n    this.setMap(cluster.getMap()); // Note: this causes onAdd to be called\n  }\n  \n  \n  /**\n   * Adds the icon to the DOM.\n   */\n  ClusterIcon.prototype.onAdd = function () {\n    var cClusterIcon = this;\n    var cMouseDownInCluster;\n    var cDraggingMapByCluster;\n    var gmVersion = window.google.maps.version.split(\".\");\n  \n    gmVersion = parseInt(gmVersion[0] * 100, 10) + parseInt(gmVersion[1], 10);\n  \n    this.div_ = document.createElement(\"div\");\n    this.div_.className = this.className_;\n    if (this.visible_) {\n      this.show();\n    }\n  \n    this.getPanes().overlayMouseTarget.appendChild(this.div_);\n  \n    // Fix for Issue 157\n    this.boundsChangedListener_ = window.google.maps.event.addListener(this.getMap(), \"bounds_changed\", function () {\n      cDraggingMapByCluster = cMouseDownInCluster;\n    });\n  \n    window.google.maps.event.addDomListener(this.div_, \"mousedown\", function () {\n      cMouseDownInCluster = true;\n      cDraggingMapByCluster = false;\n    });\n  \n  // March 1, 2018: Fix for this 3.32 exp bug, https://issuetracker.window.google.com/issues/73571522\n  // But it doesn't work with earlier releases so do a version check.\n    if (gmVersion >= 332) { // Ugly version-dependent code\n      window.google.maps.event.addDomListener(this.div_, \"touchstart\", function (e) {\n        e.stopPropagation();\n      });\n    }\n  \n    window.google.maps.event.addDomListener(this.div_, \"click\", function (e) {\n      cMouseDownInCluster = false;\n      if (!cDraggingMapByCluster) {\n        var theBounds;\n        var mz;\n        var mc = cClusterIcon.cluster_.getMarkerClusterer();\n        /**\n         * This event is fired when a cluster marker is clicked.\n         * @name MarkerClusterer#click\n         * @param {Cluster} c The cluster that was clicked.\n         * @event\n         */\n        window.google.maps.event.trigger(mc, \"click\", cClusterIcon.cluster_);\n        window.google.maps.event.trigger(mc, \"clusterclick\", cClusterIcon.cluster_); // deprecated name\n  \n        // The default click handler follows. Disable it by setting\n        // the zoomOnClick property to false.\n        if (mc.getZoomOnClick()) {\n          // Zoom into the cluster.\n          mz = mc.getMaxZoom();\n          theBounds = cClusterIcon.cluster_.getBounds();\n          mc.getMap().fitBounds(theBounds);\n          // There is a fix for Issue 170 here:\n          setTimeout(function () {\n            mc.getMap().fitBounds(theBounds);\n            // Don't zoom beyond the max zoom level\n            if (mz !== null && (mc.getMap().getZoom() > mz)) {\n              mc.getMap().setZoom(mz + 1);\n            }\n          }, 100);\n        }\n  \n        // Prevent event propagation to the map:\n        e.cancelBubble = true;\n        if (e.stopPropagation) {\n          e.stopPropagation();\n        }\n      }\n    });\n  \n    window.google.maps.event.addDomListener(this.div_, \"mouseover\", function () {\n      var mc = cClusterIcon.cluster_.getMarkerClusterer();\n      /**\n       * This event is fired when the mouse moves over a cluster marker.\n       * @name MarkerClusterer#mouseover\n       * @param {Cluster} c The cluster that the mouse moved over.\n       * @event\n       */\n      window.google.maps.event.trigger(mc, \"mouseover\", cClusterIcon.cluster_);\n    });\n  \n    window.google.maps.event.addDomListener(this.div_, \"mouseout\", function () {\n      var mc = cClusterIcon.cluster_.getMarkerClusterer();\n      /**\n       * This event is fired when the mouse moves out of a cluster marker.\n       * @name MarkerClusterer#mouseout\n       * @param {Cluster} c The cluster that the mouse moved out of.\n       * @event\n       */\n      window.google.maps.event.trigger(mc, \"mouseout\", cClusterIcon.cluster_);\n    });\n  };\n  \n  \n  /**\n   * Removes the icon from the DOM.\n   */\n  ClusterIcon.prototype.onRemove = function () {\n    if (this.div_ && this.div_.parentNode) {\n      this.hide();\n      window.google.maps.event.removeListener(this.boundsChangedListener_);\n      window.google.maps.event.clearInstanceListeners(this.div_);\n      this.div_.parentNode.removeChild(this.div_);\n      this.div_ = null;\n    }\n  };\n  \n  \n  /**\n   * Draws the icon.\n   */\n  ClusterIcon.prototype.draw = function () {\n    if (this.visible_) {\n      var pos = this.getPosFromLatLng_(this.center_);\n      this.div_.style.top = pos.y + \"px\";\n      this.div_.style.left = pos.x + \"px\";\n      this.div_.style.zIndex = window.google.maps.Marker.MAX_ZINDEX + 1; // Put above all unclustered markers\n    }\n  };\n    \n  /**\n   * Hides the icon.\n   */\n  ClusterIcon.prototype.hide = function () {\n    if (this.div_) {\n      this.div_.style.display = \"none\";\n    }\n    this.visible_ = false;\n  };\n    \n  /**\n   * Positions and shows the icon.\n   */\n  ClusterIcon.prototype.show = function () {\n    if (this.div_) {\n      var img = \"\";\n      // NOTE: values must be specified in px units\n      var bp = this.backgroundPosition_.split(\" \");\n      var spriteH = parseInt(bp[0].replace(/^\\s+|\\s+$/g, \"\"), 10);\n      var spriteV = parseInt(bp[1].replace(/^\\s+|\\s+$/g, \"\"), 10);\n      var pos = this.getPosFromLatLng_(this.center_);\n      this.div_.style.cssText = this.createCss(pos);\n      img = \"<img src='\" + this.url_ + \"' style='position: absolute; top: \" + spriteV + \"px; left: \" + spriteH + \"px; \";\n      if (this.cluster_.getMarkerClusterer().enableRetinaIcons_) {\n        img += \"width: \" + this.width_ + \"px; height: \" + this.height_ + \"px;\";\n      } else {\n        img += \"clip: rect(\" + (-1 * spriteV) + \"px, \" + ((-1 * spriteH) + this.width_) + \"px, \" +\n            ((-1 * spriteV) + this.height_) + \"px, \" + (-1 * spriteH) + \"px);\";\n      }\n      img += \"'>\";\n      this.div_.innerHTML = img + \"<div style='\" +\n          \"position: absolute;\" +\n          \"top: \" + this.anchorText_[0] + \"px;\" +\n          \"left: \" + this.anchorText_[1] + \"px;\" +\n          \"color: \" + this.textColor_ + \";\" +\n          \"font-size: \" + this.textSize_ + \"px;\" +\n          \"font-family: \" + this.fontFamily_ + \";\" +\n          \"font-weight: \" + this.fontWeight_ + \";\" +\n          \"font-style: \" + this.fontStyle_ + \";\" +\n          \"text-decoration: \" + this.textDecoration_ + \";\" +\n          \"text-align: center;\" +\n          \"width: \" + this.width_ + \"px;\" +\n          \"line-height:\" + this.height_ + \"px;\" +\n          \"'>\" + this.sums_.text + \"</div>\";\n      if (typeof this.sums_.title === \"undefined\" || this.sums_.title === \"\") {\n        this.div_.title = this.cluster_.getMarkerClusterer().getTitle();\n      } else {\n        this.div_.title = this.sums_.title;\n      }\n      this.div_.style.display = \"\";\n    }\n    this.visible_ = true;\n  };\n    \n  /**\n   * Sets the icon styles to the appropriate element in the styles array.\n   *\n   * @param {ClusterIconInfo} sums The icon label text and styles index.\n   */\n  ClusterIcon.prototype.useStyle = function (sums) {\n    this.sums_ = sums;\n    var index = Math.max(0, sums.index - 1);\n    index = Math.min(this.styles_.length - 1, index);\n    var style = this.styles_[index];\n    this.url_ = style.url;\n    this.height_ = style.height;\n    this.width_ = style.width;\n    this.anchorText_ = style.anchorText || [0, 0];\n    this.anchorIcon_ = style.anchorIcon || [parseInt(this.height_ / 2, 10), parseInt(this.width_ / 2, 10)];\n    this.textColor_ = style.textColor || \"black\";\n    this.textSize_ = style.textSize || 11;\n    this.textDecoration_ = style.textDecoration || \"none\";\n    this.fontWeight_ = style.fontWeight || \"bold\";\n    this.fontStyle_ = style.fontStyle || \"normal\";\n    this.fontFamily_ = style.fontFamily || \"Arial,sans-serif\";\n    this.backgroundPosition_ = style.backgroundPosition || \"0 0\";\n  };\n    \n  /**\n   * Sets the position at which to center the icon.\n   *\n   * @param {window.google.maps.LatLng} center The latlng to set as the center.\n   */\n  ClusterIcon.prototype.setCenter = function (center) {\n    this.center_ = center;\n  };\n  \n  /**\n   * Creates the cssText style parameter based on the position of the icon.\n   *\n   * @param {window.google.maps.Point} pos The position of the icon.\n   * @return {string} The CSS style text.\n   */\n  ClusterIcon.prototype.createCss = function (pos) {\n    var style = [];\n    style.push(\"cursor: pointer;\");\n    style.push(\"position: absolute; top: \" + pos.y + \"px; left: \" + pos.x + \"px;\");\n    style.push(\"width: \" + this.width_ + \"px; height: \" + this.height_ + \"px;\");\n    style.push(\"-webkit-user-select: none;\");\n    style.push(\"-khtml-user-select: none;\");\n    style.push(\"-moz-user-select: none;\");\n    style.push(\"-o-user-select: none;\");\n    style.push(\"user-select: none;\");\n    return style.join(\"\");\n  };\n    \n  /**\n   * Returns the position at which to place the DIV depending on the latlng.\n   *\n   * @param {window.google.maps.LatLng} latlng The position in latlng.\n   * @return {window.google.maps.Point} The position in pixels.\n   */\n  ClusterIcon.prototype.getPosFromLatLng_ = function (latlng) {\n    var pos = this.getProjection().fromLatLngToDivPixel(latlng);\n    pos.x -= this.anchorIcon_[1];\n    pos.y -= this.anchorIcon_[0];\n    pos.x = parseInt(pos.x, 10);\n    pos.y = parseInt(pos.y, 10);\n    return pos;\n  };\n    \n  /**\n   * Creates a single cluster that manages a group of proximate markers.\n   *  Used internally, do not call this constructor directly.\n   * @constructor\n   * @param {MarkerClusterer} mc The <code>MarkerClusterer</code> object with which this\n   *  cluster is associated.\n   */\n  function Cluster(mc) {\n    this.markerClusterer_ = mc;\n    this.map_ = mc.getMap();\n    this.gridSize_ = mc.getGridSize();\n    this.minClusterSize_ = mc.getMinimumClusterSize();\n    this.averageCenter_ = mc.getAverageCenter();\n    this.markers_ = [];\n    this.center_ = null;\n    this.bounds_ = null;\n    this.clusterIcon_ = new ClusterIcon(this, mc.getStyles());\n  }\n    \n  /**\n   * Returns the number of markers managed by the cluster. You can call this from\n   * a <code>click</code>, <code>mouseover</code>, or <code>mouseout</code> event handler\n   * for the <code>MarkerClusterer</code> object.\n   *\n   * @return {number} The number of markers in the cluster.\n   */\n  Cluster.prototype.getSize = function () {\n    return this.markers_.length;\n  };\n    \n  /**\n   * Returns the array of markers managed by the cluster. You can call this from\n   * a <code>click</code>, <code>mouseover</code>, or <code>mouseout</code> event handler\n   * for the <code>MarkerClusterer</code> object.\n   *\n   * @return {Array} The array of markers in the cluster.\n   */\n  Cluster.prototype.getMarkers = function () {\n    return this.markers_;\n  };\n    \n  /**\n   * Returns the center of the cluster. You can call this from\n   * a <code>click</code>, <code>mouseover</code>, or <code>mouseout</code> event handler\n   * for the <code>MarkerClusterer</code> object.\n   *\n   * @return {window.google.maps.LatLng} The center of the cluster.\n   */\n  Cluster.prototype.getCenter = function () {\n    return this.center_;\n  };\n    \n  /**\n   * Returns the map with which the cluster is associated.\n   *\n   * @return {window.google.maps.Map} The map.\n   * @ignore\n   */\n  Cluster.prototype.getMap = function () {\n    return this.map_;\n  };\n    \n  /**\n   * Returns the <code>MarkerClusterer</code> object with which the cluster is associated.\n   *\n   * @return {MarkerClusterer} The associated marker clusterer.\n   * @ignore\n   */\n  Cluster.prototype.getMarkerClusterer = function () {\n    return this.markerClusterer_;\n  };\n    \n  /**\n   * Returns the bounds of the cluster.\n   *\n   * @return {window.google.maps.LatLngBounds} the cluster bounds.\n   * @ignore\n   */\n  Cluster.prototype.getBounds = function () {\n    var i;\n    var bounds = new window.google.maps.LatLngBounds(this.center_, this.center_);\n    var markers = this.getMarkers();\n    for (i = 0; i < markers.length; i++) {\n      bounds.extend(markers[i].getPosition());\n    }\n    return bounds;\n  };\n    \n  /**\n   * Removes the cluster from the map.\n   *\n   * @ignore\n   */\n  Cluster.prototype.remove = function () {\n    this.clusterIcon_.setMap(null);\n    this.markers_ = [];\n    delete this.markers_;\n  };\n    \n  /**\n   * Adds a marker to the cluster.\n   *\n   * @param {window.google.maps.Marker} marker The marker to be added.\n   * @return {boolean} True if the marker was added.\n   * @ignore\n   */\n  Cluster.prototype.addMarker = function (marker) {\n    var i;\n    var mCount;\n    var mz;\n  \n    if (this.isMarkerAlreadyAdded_(marker)) {\n      return false;\n    }\n  \n    if (!this.center_) {\n      this.center_ = marker.getPosition();\n      this.calculateBounds_();\n    } else {\n      if (this.averageCenter_) {\n        var l = this.markers_.length + 1;\n        var lat = (this.center_.lat() * (l - 1) + marker.getPosition().lat()) / l;\n        var lng = (this.center_.lng() * (l - 1) + marker.getPosition().lng()) / l;\n        this.center_ = new window.google.maps.LatLng(lat, lng);\n        this.calculateBounds_();\n      }\n    }\n  \n    marker.isAdded = true;\n    this.markers_.push(marker);\n  \n    mCount = this.markers_.length;\n    mz = this.markerClusterer_.getMaxZoom();\n    if (mz !== null && this.map_.getZoom() > mz) {\n      // Zoomed in past max zoom, so show the marker.\n      if (marker.getMap() !== this.map_) {\n        marker.setMap(this.map_);\n      }\n    } else if (mCount < this.minClusterSize_) {\n      // Min cluster size not reached so show the marker.\n      if (marker.getMap() !== this.map_) {\n        marker.setMap(this.map_);\n      }\n    } else if (mCount === this.minClusterSize_) {\n      // Hide the markers that were showing.\n      for (i = 0; i < mCount; i++) {\n        this.markers_[i].setMap(null);\n      }\n    } else {\n      marker.setMap(null);\n    }\n  \n    this.updateIcon_();\n    return true;\n  };\n    \n  /**\n   * Determines if a marker lies within the cluster's bounds.\n   *\n   * @param {window.google.maps.Marker} marker The marker to check.\n   * @return {boolean} True if the marker lies in the bounds.\n   * @ignore\n   */\n  Cluster.prototype.isMarkerInClusterBounds = function (marker) {\n    return this.bounds_.contains(marker.getPosition());\n  };\n    \n  /**\n   * Calculates the extended bounds of the cluster with the grid.\n   */\n  Cluster.prototype.calculateBounds_ = function () {\n    var bounds = new window.google.maps.LatLngBounds(this.center_, this.center_);\n    this.bounds_ = this.markerClusterer_.getExtendedBounds(bounds);\n  };\n    \n  /**\n   * Updates the cluster icon.\n   */\n  Cluster.prototype.updateIcon_ = function () {\n    var mCount = this.markers_.length;\n    var mz = this.markerClusterer_.getMaxZoom();\n  \n    if (mz !== null && this.map_.getZoom() > mz) {\n      this.clusterIcon_.hide();\n      return;\n    }\n  \n    if (mCount < this.minClusterSize_) {\n      // Min cluster size not yet reached.\n      this.clusterIcon_.hide();\n      return;\n    }\n  \n    var numStyles = this.markerClusterer_.getStyles().length;\n    var sums = this.markerClusterer_.getCalculator()(this.markers_, numStyles);\n    this.clusterIcon_.setCenter(this.center_);\n    this.clusterIcon_.useStyle(sums);\n    this.clusterIcon_.show();\n  };\n  \n  \n  /**\n   * Determines if a marker has already been added to the cluster.\n   *\n   * @param {window.google.maps.Marker} marker The marker to check.\n   * @return {boolean} True if the marker has already been added.\n   */\n  Cluster.prototype.isMarkerAlreadyAdded_ = function (marker) {\n    var i;\n    if (this.markers_.indexOf) {\n      return this.markers_.indexOf(marker) !== -1;\n    } else {\n      for (i = 0; i < this.markers_.length; i++) {\n        if (marker === this.markers_[i]) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n  \n  \n  /**\n   * @name MarkerClustererOptions\n   * @class This class represents the optional parameter passed to\n   *  the {@link MarkerClusterer} constructor.\n   * @property {number} [gridSize=60] The grid size of a cluster in pixels. The grid is a square.\n   * @property {number} [maxZoom=null] The maximum zoom level at which clustering is enabled or\n   *  <code>null</code> if clustering is to be enabled at all zoom levels.\n   * @property {boolean} [zoomOnClick=true] Whether to zoom the map when a cluster marker is\n   *  clicked. You may want to set this to <code>false</code> if you have installed a handler\n   *  for the <code>click</code> event and it deals with zooming on its own.\n   * @property {boolean} [averageCenter=false] Whether the position of a cluster marker should be\n   *  the average position of all markers in the cluster. If set to <code>false</code>, the\n   *  cluster marker is positioned at the location of the first marker added to the cluster.\n   * @property {number} [minimumClusterSize=2] The minimum number of markers needed in a cluster\n   *  before the markers are hidden and a cluster marker appears.\n   * @property {boolean} [ignoreHidden=false] Whether to ignore hidden markers in clusters. You\n   *  may want to set this to <code>true</code> to ensure that hidden markers are not included\n   *  in the marker count that appears on a cluster marker (this count is the value of the\n   *  <code>text</code> property of the result returned by the default <code>calculator</code>).\n   *  If set to <code>true</code> and you change the visibility of a marker being clustered, be\n   *  sure to also call <code>MarkerClusterer.repaint()</code>.\n   * @property {string} [title=\"\"] The tooltip to display when the mouse moves over a cluster\n   *  marker. (Alternatively, you can use a custom <code>calculator</code> function to specify a\n   *  different tooltip for each cluster marker.)\n   * @property {function} [calculator=MarkerClusterer.CALCULATOR] The function used to determine\n   *  the text to be displayed on a cluster marker and the index indicating which style to use\n   *  for the cluster marker. The input parameters for the function are (1) the array of markers\n   *  represented by a cluster marker and (2) the number of cluster icon styles. It returns a\n   *  {@link ClusterIconInfo} object. The default <code>calculator</code> returns a\n   *  <code>text</code> property which is the number of markers in the cluster and an\n   *  <code>index</code> property which is one higher than the lowest integer such that\n   *  <code>10^i</code> exceeds the number of markers in the cluster, or the size of the styles\n   *  array, whichever is less. The <code>styles</code> array element used has an index of\n   *  <code>index</code> minus 1. For example, the default <code>calculator</code> returns a\n   *  <code>text</code> value of <code>\"125\"</code> and an <code>index</code> of <code>3</code>\n   *  for a cluster icon representing 125 markers so the element used in the <code>styles</code>\n   *  array is <code>2</code>. A <code>calculator</code> may also return a <code>title</code>\n   *  property that contains the text of the tooltip to be used for the cluster marker. If\n   *   <code>title</code> is not defined, the tooltip is set to the value of the <code>title</code>\n   *   property for the MarkerClusterer.\n   * @property {string} [clusterClass=\"cluster\"] The name of the CSS class defining general styles\n   *  for the cluster markers. Use this class to define CSS styles that are not set up by the code\n   *  that processes the <code>styles</code> array.\n   * @property {Array} [styles] An array of {@link ClusterIconStyle} elements defining the styles\n   *  of the cluster markers to be used. The element to be used to style a given cluster marker\n   *  is determined by the function defined by the <code>calculator</code> property.\n   *  The default is an array of {@link ClusterIconStyle} elements whose properties are derived\n   *  from the values for <code>imagePath</code>, <code>imageExtension</code>, and\n   *  <code>imageSizes</code>.\n   * @property {boolean} [enableRetinaIcons=false] Whether to allow the use of cluster icons that\n   * have sizes that are some multiple (typically double) of their actual display size. Icons such\n   * as these look better when viewed on high-resolution monitors such as Apple's Retina displays.\n   * Note: if this property is <code>true</code>, sprites cannot be used as cluster icons.\n   * @property {number} [batchSize=MarkerClusterer.BATCH_SIZE] Set this property to the\n   *  number of markers to be processed in a single batch when using a browser other than\n   *  Internet Explorer (for Internet Explorer, use the batchSizeIE property instead).\n   * @property {number} [batchSizeIE=MarkerClusterer.BATCH_SIZE_IE] When Internet Explorer is\n   *  being used, markers are processed in several batches with a small delay inserted between\n   *  each batch in an attempt to avoid Javascript timeout errors. Set this property to the\n   *  number of markers to be processed in a single batch; select as high a number as you can\n   *  without causing a timeout error in the browser. This number might need to be as low as 100\n   *  if 15,000 markers are being managed, for example.\n   * @property {string} [imagePath=MarkerClusterer.IMAGE_PATH]\n   *  The full URL of the root name of the group of image files to use for cluster icons.\n   *  The complete file name is of the form <code>imagePath</code>n.<code>imageExtension</code>\n   *  where n is the image file number (1, 2, etc.).\n   * @property {string} [imageExtension=MarkerClusterer.IMAGE_EXTENSION]\n   *  The extension name for the cluster icon image files (e.g., <code>\"png\"</code> or\n   *  <code>\"jpg\"</code>).\n   * @property {Array} [imageSizes=MarkerClusterer.IMAGE_SIZES]\n   *  An array of numbers containing the widths of the group of\n   *  <code>imagePath</code>n.<code>imageExtension</code> image files.\n   *  (The images are assumed to be square.)\n   */\n  /**\n   * Creates a MarkerClusterer object with the options specified in {@link MarkerClustererOptions}.\n   * @constructor\n   * @extends window.google.maps.OverlayView\n   * @param {window.google.maps.Map} map The Google map to attach to.\n   * @param {Array.<window.google.maps.Marker>} [opt_markers] The markers to be added to the cluster.\n   * @param {MarkerClustererOptions} [opt_options] The optional parameters.\n   */\n  function MarkerClusterer(map, opt_markers, opt_options) {\n    // MarkerClusterer implements window.google.maps.OverlayView interface. We use the\n    // extend function to extend MarkerClusterer with window.google.maps.OverlayView\n    // because it might not always be available when the code is defined so we\n    // look for it at the last possible moment. If it doesn't exist now then\n    // there is no point going ahead :)\n    this.extend(MarkerClusterer, window.google.maps.OverlayView);\n  \n    opt_markers = opt_markers || [];\n    opt_options = opt_options || {};\n  \n    this.markers_ = [];\n    this.clusters_ = [];\n    this.listeners_ = [];\n    this.activeMap_ = null;\n    this.ready_ = false;\n  \n    this.gridSize_ = opt_options.gridSize || 60;\n    this.minClusterSize_ = opt_options.minimumClusterSize || 2;\n    this.maxZoom_ = opt_options.maxZoom || null;\n    this.styles_ = opt_options.styles || [];\n    this.title_ = opt_options.title || \"\";\n    this.zoomOnClick_ = true;\n    if (opt_options.zoomOnClick !== undefined) {\n      this.zoomOnClick_ = opt_options.zoomOnClick;\n    }\n    this.averageCenter_ = false;\n    if (opt_options.averageCenter !== undefined) {\n      this.averageCenter_ = opt_options.averageCenter;\n    }\n    this.ignoreHidden_ = false;\n    if (opt_options.ignoreHidden !== undefined) {\n      this.ignoreHidden_ = opt_options.ignoreHidden;\n    }\n    this.enableRetinaIcons_ = false;\n    if (opt_options.enableRetinaIcons !== undefined) {\n      this.enableRetinaIcons_ = opt_options.enableRetinaIcons;\n    }\n    this.imagePath_ = opt_options.imagePath || MarkerClusterer.IMAGE_PATH;\n    this.imageExtension_ = opt_options.imageExtension || MarkerClusterer.IMAGE_EXTENSION;\n    this.imageSizes_ = opt_options.imageSizes || MarkerClusterer.IMAGE_SIZES;\n    this.calculator_ = opt_options.calculator || MarkerClusterer.CALCULATOR;\n    this.batchSize_ = opt_options.batchSize || MarkerClusterer.BATCH_SIZE;\n    this.batchSizeIE_ = opt_options.batchSizeIE || MarkerClusterer.BATCH_SIZE_IE;\n    this.clusterClass_ = opt_options.clusterClass || \"cluster\";\n  \n    if (navigator.userAgent.toLowerCase().indexOf(\"msie\") !== -1) {\n      // Try to avoid IE timeout when processing a huge number of markers:\n      this.batchSize_ = this.batchSizeIE_;\n    }\n  \n    this.setupStyles_();\n  \n    this.addMarkers(opt_markers, true);\n    this.setMap(map); // Note: this causes onAdd to be called\n  }\n  \n  \n  /**\n   * Implementation of the onAdd interface method.\n   * @ignore\n   */\n  MarkerClusterer.prototype.onAdd = function () {\n    var cMarkerClusterer = this;\n  \n    this.activeMap_ = this.getMap();\n    this.ready_ = true;\n  \n    this.repaint();\n  \n    this.prevZoom_ = this.getMap().getZoom();\n  \n    // Add the map event listeners\n    this.listeners_ = [\n      window.google.maps.event.addListener(this.getMap(), \"zoom_changed\", function () {\n        // Fix for bug #407\n        // Determines map type and prevents illegal zoom levels\n        var zoom = this.getMap().getZoom();\n        var minZoom = this.getMap().minZoom || 0;\n        var maxZoom = Math.min(this.getMap().maxZoom || 100,\n                               this.getMap().mapTypes[this.getMap().getMapTypeId()].maxZoom);\n        zoom = Math.min(Math.max(zoom, minZoom), maxZoom);\n  \n        if (this.prevZoom_ != zoom) {\n          this.prevZoom_ = zoom;\n          this.resetViewport_(false);\n        }\n      }.bind(this)),\n      window.google.maps.event.addListener(this.getMap(), \"idle\", function () {\n        cMarkerClusterer.redraw_();\n      })\n    ];\n  };\n  \n  \n  /**\n   * Implementation of the onRemove interface method.\n   * Removes map event listeners and all cluster icons from the DOM.\n   * All managed markers are also put back on the map.\n   * @ignore\n   */\n  MarkerClusterer.prototype.onRemove = function () {\n    var i;\n  \n    // Put all the managed markers back on the map:\n    for (i = 0; i < this.markers_.length; i++) {\n      if (this.markers_[i].getMap() !== this.activeMap_) {\n        this.markers_[i].setMap(this.activeMap_);\n      }\n    }\n  \n    // Remove all clusters:\n    for (i = 0; i < this.clusters_.length; i++) {\n      this.clusters_[i].remove();\n    }\n    this.clusters_ = [];\n  \n    // Remove map event listeners:\n    for (i = 0; i < this.listeners_.length; i++) {\n      window.google.maps.event.removeListener(this.listeners_[i]);\n    }\n    this.listeners_ = [];\n  \n    this.activeMap_ = null;\n    this.ready_ = false;\n  };\n    \n  /**\n   * Implementation of the draw interface method.\n   * @ignore\n   */\n  MarkerClusterer.prototype.draw = function () {};\n    \n  /**\n   * Sets up the styles object.\n   */\n  MarkerClusterer.prototype.setupStyles_ = function () {\n    var i, size;\n    if (this.styles_.length > 0) {\n      return;\n    }\n  \n    for (i = 0; i < this.imageSizes_.length; i++) {\n      size = this.imageSizes_[i];\n      this.styles_.push({\n        url: this.imagePath_ + (i + 1) + \".\" + this.imageExtension_,\n        height: size,\n        width: size\n      });\n    }\n  };\n    \n  /**\n   *  Fits the map to the bounds of the markers managed by the clusterer.\n   */\n  MarkerClusterer.prototype.fitMapToMarkers = function () {\n    var i;\n    var markers = this.getMarkers();\n    var bounds = new window.google.maps.LatLngBounds();\n    for (i = 0; i < markers.length; i++) {\n      // March 3, 2018: Bug fix -- honor the ignoreHidden property\n      if (markers[i].getVisible() || !this.getIgnoreHidden()) {\n        bounds.extend(markers[i].getPosition());\n      }\n    }\n  \n    this.getMap().fitBounds(bounds);\n  };\n    \n  /**\n   * Returns the value of the <code>gridSize</code> property.\n   *\n   * @return {number} The grid size.\n   */\n  MarkerClusterer.prototype.getGridSize = function () {\n    return this.gridSize_;\n  };\n    \n  /**\n   * Sets the value of the <code>gridSize</code> property.\n   *\n   * @param {number} gridSize The grid size.\n   */\n  MarkerClusterer.prototype.setGridSize = function (gridSize) {\n    this.gridSize_ = gridSize;\n  };\n    \n  /**\n   * Returns the value of the <code>minimumClusterSize</code> property.\n   *\n   * @return {number} The minimum cluster size.\n   */\n  MarkerClusterer.prototype.getMinimumClusterSize = function () {\n    return this.minClusterSize_;\n  };\n  \n  /**\n   * Sets the value of the <code>minimumClusterSize</code> property.\n   *\n   * @param {number} minimumClusterSize The minimum cluster size.\n   */\n  MarkerClusterer.prototype.setMinimumClusterSize = function (minimumClusterSize) {\n    this.minClusterSize_ = minimumClusterSize;\n  };\n    \n  /**\n   *  Returns the value of the <code>maxZoom</code> property.\n   *\n   *  @return {number} The maximum zoom level.\n   */\n  MarkerClusterer.prototype.getMaxZoom = function () {\n    return this.maxZoom_;\n  };\n    \n  /**\n   *  Sets the value of the <code>maxZoom</code> property.\n   *\n   *  @param {number} maxZoom The maximum zoom level.\n   */\n  MarkerClusterer.prototype.setMaxZoom = function (maxZoom) {\n    this.maxZoom_ = maxZoom;\n  };\n    \n  /**\n   *  Returns the value of the <code>styles</code> property.\n   *\n   *  @return {Array} The array of styles defining the cluster markers to be used.\n   */\n  MarkerClusterer.prototype.getStyles = function () {\n    return this.styles_;\n  };\n    \n  /**\n   *  Sets the value of the <code>styles</code> property.\n   *\n   *  @param {Array.<ClusterIconStyle>} styles The array of styles to use.\n   */\n  MarkerClusterer.prototype.setStyles = function (styles) {\n    this.styles_ = styles;\n  };\n    \n  /**\n   * Returns the value of the <code>title</code> property.\n   *\n   * @return {string} The content of the title text.\n   */\n  MarkerClusterer.prototype.getTitle = function () {\n    return this.title_;\n  };\n    \n  /**\n   *  Sets the value of the <code>title</code> property.\n   *\n   *  @param {string} title The value of the title property.\n   */\n  MarkerClusterer.prototype.setTitle = function (title) {\n    this.title_ = title;\n  };\n    \n  /**\n   * Returns the value of the <code>zoomOnClick</code> property.\n   *\n   * @return {boolean} True if zoomOnClick property is set.\n   */\n  MarkerClusterer.prototype.getZoomOnClick = function () {\n    return this.zoomOnClick_;\n  };\n    \n  /**\n   *  Sets the value of the <code>zoomOnClick</code> property.\n   *\n   *  @param {boolean} zoomOnClick The value of the zoomOnClick property.\n   */\n  MarkerClusterer.prototype.setZoomOnClick = function (zoomOnClick) {\n    this.zoomOnClick_ = zoomOnClick;\n  };\n    \n  /**\n   * Returns the value of the <code>averageCenter</code> property.\n   *\n   * @return {boolean} True if averageCenter property is set.\n   */\n  MarkerClusterer.prototype.getAverageCenter = function () {\n    return this.averageCenter_;\n  };\n  \n  /**\n   *  Sets the value of the <code>averageCenter</code> property.\n   *\n   *  @param {boolean} averageCenter The value of the averageCenter property.\n   */\n  MarkerClusterer.prototype.setAverageCenter = function (averageCenter) {\n    this.averageCenter_ = averageCenter;\n  };  \n  \n  /**\n   * Returns the value of the <code>ignoreHidden</code> property.\n   *\n   * @return {boolean} True if ignoreHidden property is set.\n   */\n  MarkerClusterer.prototype.getIgnoreHidden = function () {\n    return this.ignoreHidden_;\n  };  \n  \n  /**\n   *  Sets the value of the <code>ignoreHidden</code> property.\n   *\n   *  @param {boolean} ignoreHidden The value of the ignoreHidden property.\n   */\n  MarkerClusterer.prototype.setIgnoreHidden = function (ignoreHidden) {\n    this.ignoreHidden_ = ignoreHidden;\n  };  \n  \n  /**\n   * Returns the value of the <code>enableRetinaIcons</code> property.\n   *\n   * @return {boolean} True if enableRetinaIcons property is set.\n   */\n  MarkerClusterer.prototype.getEnableRetinaIcons = function () {\n    return this.enableRetinaIcons_;\n  };  \n  \n  /**\n   *  Sets the value of the <code>enableRetinaIcons</code> property.\n   *\n   *  @param {boolean} enableRetinaIcons The value of the enableRetinaIcons property.\n   */\n  MarkerClusterer.prototype.setEnableRetinaIcons = function (enableRetinaIcons) {\n    this.enableRetinaIcons_ = enableRetinaIcons;\n  };  \n  \n  /**\n   * Returns the value of the <code>imageExtension</code> property.\n   *\n   * @return {string} The value of the imageExtension property.\n   */\n  MarkerClusterer.prototype.getImageExtension = function () {\n    return this.imageExtension_;\n  };\n    \n  /**\n   *  Sets the value of the <code>imageExtension</code> property.\n   *\n   *  @param {string} imageExtension The value of the imageExtension property.\n   */\n  MarkerClusterer.prototype.setImageExtension = function (imageExtension) {\n    this.imageExtension_ = imageExtension;\n  };\n    \n  /**\n   * Returns the value of the <code>imagePath</code> property.\n   *\n   * @return {string} The value of the imagePath property.\n   */\n  MarkerClusterer.prototype.getImagePath = function () {\n    return this.imagePath_;\n  };\n    \n  /**\n   *  Sets the value of the <code>imagePath</code> property.\n   *\n   *  @param {string} imagePath The value of the imagePath property.\n   */\n  MarkerClusterer.prototype.setImagePath = function (imagePath) {\n    this.imagePath_ = imagePath;\n  };\n    \n  /**\n   * Returns the value of the <code>imageSizes</code> property.\n   *\n   * @return {Array} The value of the imageSizes property.\n   */\n  MarkerClusterer.prototype.getImageSizes = function () {\n    return this.imageSizes_;\n  };\n    \n  /**\n   *  Sets the value of the <code>imageSizes</code> property.\n   *\n   *  @param {Array} imageSizes The value of the imageSizes property.\n   */\n  MarkerClusterer.prototype.setImageSizes = function (imageSizes) {\n    this.imageSizes_ = imageSizes;\n  };\n    \n  /**\n   * Returns the value of the <code>calculator</code> property.\n   *\n   * @return {function} the value of the calculator property.\n   */\n  MarkerClusterer.prototype.getCalculator = function () {\n    return this.calculator_;\n  };\n    \n  /**\n   * Sets the value of the <code>calculator</code> property.\n   *\n   * @param {function(Array.<window.google.maps.Marker>, number)} calculator The value\n   *  of the calculator property.\n   */\n  MarkerClusterer.prototype.setCalculator = function (calculator) {\n    this.calculator_ = calculator;\n  };\n    \n  /**\n   * Returns the value of the <code>batchSizeIE</code> property.\n   *\n   * @return {number} the value of the batchSizeIE property.\n   */\n  MarkerClusterer.prototype.getBatchSizeIE = function () {\n    return this.batchSizeIE_;\n  };\n    \n  /**\n   * Sets the value of the <code>batchSizeIE</code> property.\n   *\n   *  @param {number} batchSizeIE The value of the batchSizeIE property.\n   */\n  MarkerClusterer.prototype.setBatchSizeIE = function (batchSizeIE) {\n    this.batchSizeIE_ = batchSizeIE;\n  };\n    \n  /**\n   * Returns the value of the <code>clusterClass</code> property.\n   *\n   * @return {string} the value of the clusterClass property.\n   */\n  MarkerClusterer.prototype.getClusterClass = function () {\n    return this.clusterClass_;\n  };\n    \n  /**\n   * Sets the value of the <code>clusterClass</code> property.\n   *\n   *  @param {string} clusterClass The value of the clusterClass property.\n   */\n  MarkerClusterer.prototype.setClusterClass = function (clusterClass) {\n    this.clusterClass_ = clusterClass;\n  };  \n  \n  /**\n   *  Returns the array of markers managed by the clusterer.\n   *\n   *  @return {Array} The array of markers managed by the clusterer.\n   */\n  MarkerClusterer.prototype.getMarkers = function () {\n    return this.markers_;\n  };  \n  \n  /**\n   *  Returns the number of markers managed by the clusterer.\n   *\n   *  @return {number} The number of markers.\n   */\n  MarkerClusterer.prototype.getTotalMarkers = function () {\n    return this.markers_.length;\n  };\n    \n  /**\n   * Returns the current array of clusters formed by the clusterer.\n   *\n   * @return {Array} The array of clusters formed by the clusterer.\n   */\n  MarkerClusterer.prototype.getClusters = function () {\n    return this.clusters_;\n  };\n    \n  /**\n   * Returns the number of clusters formed by the clusterer.\n   *\n   * @return {number} The number of clusters formed by the clusterer.\n   */\n  MarkerClusterer.prototype.getTotalClusters = function () {\n    return this.clusters_.length;\n  };\n    \n  /**\n   * Adds a marker to the clusterer. The clusters are redrawn unless\n   *  <code>opt_nodraw</code> is set to <code>true</code>.\n   *\n   * @param {window.google.maps.Marker} marker The marker to add.\n   * @param {boolean} [opt_nodraw] Set to <code>true</code> to prevent redrawing.\n   */\n  MarkerClusterer.prototype.addMarker = function (marker, opt_nodraw) {\n    this.pushMarkerTo_(marker);\n    if (!opt_nodraw) {\n      this.redraw_();\n    }\n  };\n    \n  /**\n   * Adds an array of markers to the clusterer. The clusters are redrawn unless\n   *  <code>opt_nodraw</code> is set to <code>true</code>.\n   *\n   * @param {Array.<window.google.maps.Marker>} markers The markers to add.\n   * @param {boolean} [opt_nodraw] Set to <code>true</code> to prevent redrawing.\n   */\n  MarkerClusterer.prototype.addMarkers = function (markers, opt_nodraw) {\n    var key;\n    for (key in markers) {\n      if (markers.hasOwnProperty(key)) {\n        this.pushMarkerTo_(markers[key]);\n      }\n    }\n    if (!opt_nodraw) {\n      this.redraw_();\n    }\n  };\n    \n  /**\n   * Pushes a marker to the clusterer.\n   *\n   * @param {window.google.maps.Marker} marker The marker to add.\n   */\n  MarkerClusterer.prototype.pushMarkerTo_ = function (marker) {\n    // If the marker is draggable add a listener so we can update the clusters on the dragend:\n    if (marker.getDraggable()) {\n      var cMarkerClusterer = this;\n      window.google.maps.event.addListener(marker, \"dragend\", function () {\n        if (cMarkerClusterer.ready_) {\n          this.isAdded = false;\n          cMarkerClusterer.repaint();\n        }\n      });\n    }\n    marker.isAdded = false;\n    this.markers_.push(marker);\n  };\n    \n  /**\n   * Removes a marker from the cluster.  The clusters are redrawn unless\n   *  <code>opt_nodraw</code> is set to <code>true</code>. Returns <code>true</code> if the\n   *  marker was removed from the clusterer.\n   *\n   * @param {window.google.maps.Marker} marker The marker to remove.\n   * @param {boolean} [opt_nodraw] Set to <code>true</code> to prevent redrawing.\n   * @return {boolean} True if the marker was removed from the clusterer.\n   */\n  MarkerClusterer.prototype.removeMarker = function (marker, opt_nodraw) {\n    var removed = this.removeMarker_(marker);\n  \n    if (!opt_nodraw && removed) {\n      this.repaint();\n    }\n  \n    return removed;\n  };\n    \n  /**\n   * Removes an array of markers from the cluster. The clusters are redrawn unless\n   *  <code>opt_nodraw</code> is set to <code>true</code>. Returns <code>true</code> if markers\n   *  were removed from the clusterer.\n   *\n   * @param {Array.<window.google.maps.Marker>} markers The markers to remove.\n   * @param {boolean} [opt_nodraw] Set to <code>true</code> to prevent redrawing.\n   * @return {boolean} True if markers were removed from the clusterer.\n   */\n  MarkerClusterer.prototype.removeMarkers = function (markers, opt_nodraw) {\n    var i, r;\n    var removed = false;\n  \n    for (i = 0; i < markers.length; i++) {\n      r = this.removeMarker_(markers[i]);\n      removed = removed || r;\n    }\n  \n    if (!opt_nodraw && removed) {\n      this.repaint();\n    }\n  \n    return removed;\n  };\n    \n  /**\n   * Removes a marker and returns true if removed, false if not.\n   *\n   * @param {window.google.maps.Marker} marker The marker to remove\n   * @return {boolean} Whether the marker was removed or not\n   */\n  MarkerClusterer.prototype.removeMarker_ = function (marker) {\n    var i;\n    var index = -1;\n    if (this.markers_.indexOf) {\n      index = this.markers_.indexOf(marker);\n    } else {\n      for (i = 0; i < this.markers_.length; i++) {\n        if (marker === this.markers_[i]) {\n          index = i;\n          break;\n        }\n      }\n    }\n  \n    if (index === -1) {\n      // Marker is not in our list of markers, so do nothing:\n      return false;\n    }\n  \n    marker.setMap(null);\n    this.markers_.splice(index, 1); // Remove the marker from the list of managed markers\n    return true;\n  };\n  \n  \n  /**\n   * Removes all clusters and markers from the map and also removes all markers\n   *  managed by the clusterer.\n   */\n  MarkerClusterer.prototype.clearMarkers = function () {\n    this.resetViewport_(true);\n    this.markers_ = [];\n  };\n  \n  \n  /**\n   * Recalculates and redraws all the marker clusters from scratch.\n   *  Call this after changing any properties.\n   */\n  MarkerClusterer.prototype.repaint = function () {\n    var oldClusters = this.clusters_.slice();\n    this.clusters_ = [];\n    this.resetViewport_(false);\n    this.redraw_();\n  \n    // Remove the old clusters.\n    // Do it in a timeout to prevent blinking effect.\n    setTimeout(function () {\n      var i;\n      for (i = 0; i < oldClusters.length; i++) {\n        oldClusters[i].remove();\n      }\n    }, 0);\n  };\n  \n  \n  /**\n   * Returns the current bounds extended by the grid size.\n   *\n   * @param {window.google.maps.LatLngBounds} bounds The bounds to extend.\n   * @return {window.google.maps.LatLngBounds} The extended bounds.\n   * @ignore\n   */\n  MarkerClusterer.prototype.getExtendedBounds = function (bounds) {\n    var projection = this.getProjection();\n  \n    // Turn the bounds into latlng.\n    var tr = new window.google.maps.LatLng(bounds.getNorthEast().lat(),\n        bounds.getNorthEast().lng());\n    var bl = new window.google.maps.LatLng(bounds.getSouthWest().lat(),\n        bounds.getSouthWest().lng());\n  \n    // Convert the points to pixels and the extend out by the grid size.\n    var trPix = projection.fromLatLngToDivPixel(tr);\n    trPix.x += this.gridSize_;\n    trPix.y -= this.gridSize_;\n  \n    var blPix = projection.fromLatLngToDivPixel(bl);\n    blPix.x -= this.gridSize_;\n    blPix.y += this.gridSize_;\n  \n    // Convert the pixel points back to LatLng\n    var ne = projection.fromDivPixelToLatLng(trPix);\n    var sw = projection.fromDivPixelToLatLng(blPix);\n  \n    // Extend the bounds to contain the new bounds.\n    bounds.extend(ne);\n    bounds.extend(sw);\n  \n    return bounds;\n  };\n  \n  \n  /**\n   * Redraws all the clusters.\n   */\n  MarkerClusterer.prototype.redraw_ = function () {\n    this.createClusters_(0);\n  };\n  \n  \n  /**\n   * Removes all clusters from the map. The markers are also removed from the map\n   *  if <code>opt_hide</code> is set to <code>true</code>.\n   *\n   * @param {boolean} [opt_hide] Set to <code>true</code> to also remove the markers\n   *  from the map.\n   */\n  MarkerClusterer.prototype.resetViewport_ = function (opt_hide) {\n    var i, marker;\n    // Remove all the clusters\n    for (i = 0; i < this.clusters_.length; i++) {\n      this.clusters_[i].remove();\n    }\n    this.clusters_ = [];\n  \n    // Reset the markers to not be added and to be removed from the map.\n    for (i = 0; i < this.markers_.length; i++) {\n      marker = this.markers_[i];\n      marker.isAdded = false;\n      if (opt_hide) {\n        marker.setMap(null);\n      }\n    }\n  };\n  \n  \n  /**\n   * Calculates the distance between two latlng locations in km.\n   *\n   * @param {window.google.maps.LatLng} p1 The first lat lng point.\n   * @param {window.google.maps.LatLng} p2 The second lat lng point.\n   * @return {number} The distance between the two points in km.\n   * @see http://www.movable-type.co.uk/scripts/latlong.html\n  */\n  MarkerClusterer.prototype.distanceBetweenPoints_ = function (p1, p2) {\n    var R = 6371; // Radius of the Earth in km\n    var dLat = (p2.lat() - p1.lat()) * Math.PI / 180;\n    var dLon = (p2.lng() - p1.lng()) * Math.PI / 180;\n    var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n      Math.cos(p1.lat() * Math.PI / 180) * Math.cos(p2.lat() * Math.PI / 180) *\n      Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    var d = R * c;\n    return d;\n  };\n  \n  \n  /**\n   * Determines if a marker is contained in a bounds.\n   *\n   * @param {window.google.maps.Marker} marker The marker to check.\n   * @param {window.google.maps.LatLngBounds} bounds The bounds to check against.\n   * @return {boolean} True if the marker is in the bounds.\n   */\n  MarkerClusterer.prototype.isMarkerInBounds_ = function (marker, bounds) {\n    return bounds.contains(marker.getPosition());\n  };\n  \n  \n  /**\n   * Adds a marker to a cluster, or creates a new cluster.\n   *\n   * @param {window.google.maps.Marker} marker The marker to add.\n   */\n  MarkerClusterer.prototype.addToClosestCluster_ = function (marker) {\n    var i, d, cluster, center;\n    var distance = 40000; // Some large number\n    var clusterToAddTo = null;\n    for (i = 0; i < this.clusters_.length; i++) {\n      cluster = this.clusters_[i];\n      center = cluster.getCenter();\n      if (center) {\n        d = this.distanceBetweenPoints_(center, marker.getPosition());\n        if (d < distance) {\n          distance = d;\n          clusterToAddTo = cluster;\n        }\n      }\n    }\n  \n    if (clusterToAddTo && clusterToAddTo.isMarkerInClusterBounds(marker)) {\n      clusterToAddTo.addMarker(marker);\n    } else {\n      cluster = new Cluster(this);\n      cluster.addMarker(marker);\n      this.clusters_.push(cluster);\n    }\n  };\n  \n  \n  /**\n   * Creates the clusters. This is done in batches to avoid timeout errors\n   *  in some browsers when there is a huge number of markers.\n   *\n   * @param {number} iFirst The index of the first marker in the batch of\n   *  markers to be added to clusters.\n   */\n  MarkerClusterer.prototype.createClusters_ = function (iFirst) {\n    var i, marker;\n    var mapBounds;\n    var cMarkerClusterer = this;\n    if (!this.ready_) {\n      return;\n    }\n  \n    // Cancel previous batch processing if we're working on the first batch:\n    if (iFirst === 0) {\n      /**\n       * This event is fired when the <code>MarkerClusterer</code> begins\n       *  clustering markers.\n       * @name MarkerClusterer#clusteringbegin\n       * @param {MarkerClusterer} mc The MarkerClusterer whose markers are being clustered.\n       * @event\n       */\n      window.google.maps.event.trigger(this, \"clusteringbegin\", this);\n  \n      if (typeof this.timerRefStatic !== \"undefined\") {\n        clearTimeout(this.timerRefStatic);\n        delete this.timerRefStatic;\n      }\n    }\n  \n    // Get our current map view bounds.\n    // Create a new bounds object so we don't affect the map.\n    //\n    // See Comments 9 & 11 on Issue 3651 relating to this workaround for a Google Maps bug:\n    if (this.getMap().getZoom() > 3) {\n      mapBounds = new window.google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),\n        this.getMap().getBounds().getNorthEast());\n    } else {\n      mapBounds = new window.google.maps.LatLngBounds(new window.google.maps.LatLng(85.02070771743472, -178.48388434375), new window.google.maps.LatLng(-85.08136444384544, 178.00048865625));\n    }\n    var bounds = this.getExtendedBounds(mapBounds);\n  \n    var iLast = Math.min(iFirst + this.batchSize_, this.markers_.length);\n  \n    for (i = iFirst; i < iLast; i++) {\n      marker = this.markers_[i];\n      if (!marker.isAdded && this.isMarkerInBounds_(marker, bounds)) {\n        if (!this.ignoreHidden_ || (this.ignoreHidden_ && marker.getVisible())) {\n          this.addToClosestCluster_(marker);\n        }\n      }\n    }\n  \n    if (iLast < this.markers_.length) {\n      this.timerRefStatic = setTimeout(function () {\n        cMarkerClusterer.createClusters_(iLast);\n      }, 0);\n    } else {\n      delete this.timerRefStatic;\n  \n      /**\n       * This event is fired when the <code>MarkerClusterer</code> stops\n       *  clustering markers.\n       * @name MarkerClusterer#clusteringend\n       * @param {MarkerClusterer} mc The MarkerClusterer whose markers are being clustered.\n       * @event\n       */\n      window.google.maps.event.trigger(this, \"clusteringend\", this);\n    }\n  };\n  \n  \n  /**\n   * Extends an object's prototype by another's.\n   *\n   * @param {Object} obj1 The object to be extended.\n   * @param {Object} obj2 The object to extend with.\n   * @return {Object} The new extended object.\n   * @ignore\n   */\n  MarkerClusterer.prototype.extend = function (obj1, obj2) {\n    return (function (object) {\n      var property;\n      for (property in object.prototype) {\n        this.prototype[property] = object.prototype[property];\n      }\n      return this;\n    }).apply(obj1, [obj2]);\n  };\n  \n  \n  /**\n   * The default function for determining the label text and style\n   * for a cluster icon.\n   *\n   * @param {Array.<window.google.maps.Marker>} markers The array of markers represented by the cluster.\n   * @param {number} numStyles The number of marker styles available.\n   * @return {ClusterIconInfo} The information resource for the cluster.\n   * @constant\n   * @ignore\n   */\n  MarkerClusterer.CALCULATOR = function (markers, numStyles) {\n    var index = 0;\n    var title = \"\";\n    var count = markers.length.toString();\n  \n    var dv = count;\n    while (dv !== 0) {\n      dv = parseInt(dv / 10, 10);\n      index++;\n    }\n  \n    index = Math.min(index, numStyles);\n    return {\n      text: count,\n      index: index,\n      title: title\n    };\n  };\n  \n  \n  /**\n   * The number of markers to process in one batch.\n   *\n   * @type {number}\n   * @constant\n   */\n  MarkerClusterer.BATCH_SIZE = 2000;\n  \n  \n  /**\n   * The number of markers to process in one batch (IE only).\n   *\n   * @type {number}\n   * @constant\n   */\n  MarkerClusterer.BATCH_SIZE_IE = 500;\n  \n  \n  /**\n   * The default root name for the marker cluster images.\n   *\n   * @type {string}\n   * @constant\n   */\n  MarkerClusterer.IMAGE_PATH = \"../images/m\";\n  \n  \n  /**\n   * The default extension name for the marker cluster images.\n   *\n   * @type {string}\n   * @constant\n   */\n  MarkerClusterer.IMAGE_EXTENSION = \"png\";\n  \n  \n  /**\n   * The default array of sizes for the marker cluster images.\n   *\n   * @type {Array.<number>}\n   * @constant\n   */\n  MarkerClusterer.IMAGE_SIZES = [53, 56, 66, 78, 90];\n  \n  export default MarkerClusterer;\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport MarkerClusterer from '../vendor/marker-clusterer.js';\nimport {throttle} from '../utils.js';\n\nconst mapStateToProps = (state) => ({\n  stores: state.stores,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n});\n\n\nclass StoresMap extends Component {\n    constructor() {\n        super();\n        this.myRef = React.createRef();\n        this.map = null;\n        this.markers = [];\n      }\n      \n      componentDidMount() {\n        const styleNode = document.createElement('style');\n        styleNode.textContent = `\n            :host {\n              position: relative;\n            }\n            .map {\n              position: relative;\n              width: 100%;\n              height: 100%;\n            }\n            .gm-bundled-control {\n                bottom: 69px!important;\n                right: 28px!important;\n            }\n            .gm-bundled-control > div > div {\n                width: 28px!important;\n                height: 55px!important;\n            }\n            .gm-bundled-control > div > div > div {\n                width: 24px!important;\n                margin: 0 3px!important;\n            }\n            .gm-bundled-control button {\n                width: 28px!important;\n                height: 27px!important;\n            }\n            .gm-bundled-control button img {\n                height: 12px!important;\n                width: 11px!important;\n                margin: 8px!important;\n            }\n        `;\n        this.myRef.current.appendChild(styleNode);\n  \n        \n        this.mapElement = document.createElement('div');\n        this.mapElement.classList = 'map';\n        \n        this.myRef.current.appendChild(this.mapElement);\n        window.initGoogleMap = this.init.bind(this);\n    \n        const googleMapsJsNode = document.createElement('script');\n        googleMapsJsNode.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyCRTnC96aFUTP62mNuxDBUoHcLvR35MLOI&callback=initGoogleMap';\n        this.myRef.current.appendChild(googleMapsJsNode);\n    }\n\n    bindEvents() {\n      // this.map.addListener('dragend', this.dispatchUpdatedCoords.bind(this));\n      // this.map.addListener('zoom-update', this.dispatchUpdatedCoords.bind(this));\n    }\n\n    init() {\n        var myLatLng = {lat: 48.074766, lng: 7.574985};\n        var silverStyle = [\n            {\n              \"elementType\": \"geometry\",\n              \"stylers\": [\n                {\n                  \"color\": \"#f5f5f5\"\n                }\n              ]\n            },\n            {\n              \"elementType\": \"labels.icon\",\n              \"stylers\": [\n                {\n                  \"visibility\": \"off\"\n                }\n              ]\n            },\n            {\n              \"elementType\": \"labels.text.fill\",\n              \"stylers\": [\n                {\n                  \"color\": \"#616161\"\n                }\n              ]\n            },\n            {\n              \"elementType\": \"labels.text.stroke\",\n              \"stylers\": [\n                {\n                  \"color\": \"#f5f5f5\"\n                }\n              ]\n            },\n            {\n              \"featureType\": \"administrative.land_parcel\",\n              \"elementType\": \"labels.text.fill\",\n              \"stylers\": [\n                {\n                  \"color\": \"#bdbdbd\"\n                }\n              ]\n            },\n            {\n              \"featureType\": \"poi\",\n              \"elementType\": \"geometry\",\n              \"stylers\": [\n                {\n                  \"color\": \"#eeeeee\"\n                }\n              ]\n            },\n            {\n              \"featureType\": \"poi\",\n              \"elementType\": \"labels.text.fill\",\n              \"stylers\": [\n                {\n                  \"color\": \"#757575\"\n                }\n              ]\n            },\n            {\n              \"featureType\": \"poi.business\",\n              \"stylers\": [\n                {\n                  \"visibility\": \"off\"\n                }\n              ]\n            },\n            {\n              \"featureType\": \"poi.park\",\n              \"elementType\": \"geometry\",\n              \"stylers\": [\n                {\n                  \"color\": \"#e5e5e5\"\n                }\n              ]\n            },\n            {\n              \"featureType\": \"poi.park\",\n              \"elementType\": \"labels.text\",\n              \"stylers\": [\n                {\n                  \"visibility\": \"off\"\n                }\n              ]\n            },\n            {\n              \"featureType\": \"poi.park\",\n              \"elementType\": \"labels.text.fill\",\n              \"stylers\": [\n                {\n                  \"color\": \"#9e9e9e\"\n                }\n              ]\n            },\n            {\n              \"featureType\": \"road\",\n              \"elementType\": \"geometry\",\n              \"stylers\": [\n                {\n                  \"color\": \"#ffffff\"\n                }\n              ]\n            },\n            {\n              \"featureType\": \"road.arterial\",\n              \"elementType\": \"labels.text.fill\",\n              \"stylers\": [\n                {\n                  \"color\": \"#757575\"\n                }\n              ]\n            },\n            {\n              \"featureType\": \"road.highway\",\n              \"elementType\": \"geometry\",\n              \"stylers\": [\n                {\n                  \"color\": \"#dadada\"\n                }\n              ]\n            },\n            {\n              \"featureType\": \"road.highway\",\n              \"elementType\": \"labels.text.fill\",\n              \"stylers\": [\n                {\n                  \"color\": \"#616161\"\n                }\n              ]\n            },\n            {\n              \"featureType\": \"road.local\",\n              \"elementType\": \"labels.text.fill\",\n              \"stylers\": [\n                {\n                  \"color\": \"#9e9e9e\"\n                }\n              ]\n            },\n            {\n              \"featureType\": \"transit.line\",\n              \"elementType\": \"geometry\",\n              \"stylers\": [\n                {\n                  \"color\": \"#e5e5e5\"\n                }\n              ]\n            },\n            {\n              \"featureType\": \"transit.station\",\n              \"elementType\": \"geometry\",\n              \"stylers\": [\n                {\n                  \"color\": \"#eeeeee\"\n                }\n              ]\n            },\n            {\n              \"featureType\": \"water\",\n              \"elementType\": \"geometry\",\n              \"stylers\": [\n                {\n                  \"color\": \"#c9c9c9\"\n                }\n              ]\n            },\n            {\n              \"featureType\": \"water\",\n              \"elementType\": \"labels.text.fill\",\n              \"stylers\": [\n                {\n                  \"color\": \"#9e9e9e\"\n                }\n              ]\n            }\n        ];\n        \n        this.map = new window.google.maps.Map(this.mapElement, {\n            center: myLatLng,\n            fullscreenControl: false,\n            mapTypeControl: false,\n            streetViewControl: false,\n            styles: silverStyle,\n            zoom: 4,\n            zoomControl: true,\n            zoomControlOptions: {\n                style: window.google.maps.ZoomControlStyle.SMALL\n            }\n        });\n\n        \n\n        this.bindEvents();\n    }\n\n    setMarkers() {\n        if(!this.map) {\n            return;\n        }\n\n        this.markers = this.stores.filter((store) => store.visible).map( store => {\n            return new window.google.maps.Marker({\n                map: this.map,\n                position: {lat: Number(store.lat), lng: Number(store.lng)},\n                title: store.post_title\n            });\n        });\n\n        this.markerCluster = new MarkerClusterer(this.map, this.markers, {\n            gridSize: 40,\n            styles: [{\n                url: 'https://media.yoox.biz/ytos/resources/BALMAIN/Images/icons/pinmap-cluster.svg',\n                width: 35,\n                height: 35\n            }]\n        });\n    }\n\n    resetMarkers() {\n      if(this.markerCluster) {\n        this.markerCluster.clearMarkers();\n      }\n\n      this.markers.map((marker) => {\n          marker.setMap(null);\n      });\n        \n      this.markers = [];\n    }\n\n    // dispatchUpdatedCoords() {\n    //   dispatch({\n    //     type: 'UPDATE_COORDS',\n    //     coords: {\n    //       center: {\n    //         lat: this.map.center.lat(),\n    //         lng: this.map.center.lng()\n    //       },\n    //       ne: {\n    //         lat: this.map.getBounds().getNorthEast().lat(),\n    //         lng: this.map.getBounds().getNorthEast().lng()\n    //       },\n    //       sw: {\n    //         lat: this.map.getBounds().getSouthWest().lat(),\n    //         lng: this.map.getBounds().getSouthWest().lng()\n    //       }\n    //     }\n    //   });   \n    // }\n\n    render() {\n      this.stores = this.props.stores;\n      \n      this.resetMarkers();\n      this.setMarkers();\n      \n      return (<div className=\"mapWrapper\" ref={this.myRef}></div>)\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StoresMap);","import React, { Component } from 'react';\nimport './App.css';\n\nimport SearchOpener from './components/search-opener';\nimport LeftPanel from './components/left-panel';\nimport StoresMap from './components/stores-map';\n\nclass App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <SearchOpener />\n        <LeftPanel />\n        <StoresMap />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","function toBoolean(numberAsstring) {\n    return numberAsstring === \"0\" ? false : true;\n}\n\nexport function decodeStores(rawStores) {\n    return rawStores.map((store) => ({\n            id: String(store.ID) || '',\n            name: store.post_title || '',\n            address: store[\"wpcf-store-address\"] || '',\n            geolocationAddress: store[\"wpcf-store-geolocation-address\"] || '',\n            lat: store[\"_store-lat\"] || '',\n            lng: store[\"_store-lng\"] || '',\n            phone: store[\"wpcf-store-phone\"] || '',\n            mail: store[\"wpcf-store-email-storelocator\"] || '',\n            mails: store[\"wpcf-store-email\"] || '',\n            brand: store[\"wpcf-store-main-store-brand\"] || '',\n            classification: store[\"wpcf-store-type-classification\"] || '',\n            isFlagship: toBoolean(store[\"wpcf-store-is-flagship\"]),\n            gifCardAccepted: toBoolean(store[\"wpcf-store-gift-card-accepted\"]),\n            hasWiFi: toBoolean(store[\"wpcf-store-has-wifi\"]),\n            hasMadeToMeasure: toBoolean(store[\"wpcf-store-has-made-to-measure\"]),\n            hasTailoring: toBoolean(store[\"wpcf-store-has-tailoring\"]),\n            bookable: toBoolean(store[\"wpcf-store-bookable\"]),\n            checkAvailability: toBoolean(store[\"wpcf-store-attr-check-availabilty\"]),\n            reserveInStore: toBoolean(store[\"wpcf-store-attr-reserve-in-store\"]),\n            pickUpInStore: toBoolean(store[\"wpcf-store-attr-pick-up-in-store\"]),\n            returnInStore: toBoolean(store[\"wpcf-store-attr-return-in-store\"]),\n            clickFromStore: toBoolean(store[\"wpcf-store-attr-click-from-store\"]),\n            gender: store.gender ? \n                store.gender.map((gender) => ({\n                    id: gender.term_id,\n                    name: gender.name,\n                }))\n                : [],\n            storeTypes: store[\"store-type\"] ?\n                store[\"store-type\"].map((storeType) => ({\n                    id: String(storeType.term_id),\n                    name: storeType.name,\n                }))\n                : [],\n            productCategory: store[\"product-category\"] ? \n                store[\"product-category\"].map((productCategory) => ({\n                    id: productCategory.id,\n                    name: productCategory.name,\n                }))\n                : [],\n            location: store.location ? \n                Object.keys(store.location).map((key) => store.location[key].name)\n                : [],\n            visible: true,\n    }));\n}\n\nexport function decodeLocations(rawLocations) {\n    return rawLocations.terms.map((location) => ({\n        id: String(location.term_id) || '',\n        name: location.name || '',\n    }));\n}\n\nexport function decodeStoreTypes(rawStoreTypes) {\n    return rawStoreTypes.terms.map((storeType) => ({\n        id: String(storeType.term_id) || '',\n        name: storeType.name || '',\n    }));\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, applyMiddleware } from 'redux';\nimport thunkMiddleware from 'redux-thunk';\nimport { Provider } from 'react-redux';\n\nimport reducer from './state/reducer';\nimport state from './state/state';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport { loadStoresAction, loadLocationsAction, loadStoreTypesAction } from './state/actions.js';\nimport { decodeStores, decodeLocations, decodeStoreTypes } from './data/dataDecoder.js';\n\nconst store = createStore(reducer, state, applyMiddleware(thunkMiddleware));\n\nReactDOM.render(\n    <Provider store={store}>\n        <App />\n    </Provider>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n\nfetch('data/stores.json')\n    .then((response) => response.json())\n    .then((storesJson) => {\n        const stores = decodeStores(storesJson);\n        store.dispatch(loadStoresAction(stores));\n    });\n\nfetch('data/store-types.json')\n    .then((response) => response.json())\n    .then((storeTypesJson) => {\n        const storeTypes = decodeStoreTypes(storeTypesJson);\n        store.dispatch(loadStoreTypesAction(storeTypes));\n    });\n\nfetch('data/locations.json')\n    .then((response) => response.json())\n    .then((locationsJson) => {\n        const locations = decodeLocations(locationsJson);\n        store.dispatch(loadLocationsAction(locations));\n    });","export default {\n    stores: [],\n    storeTypes: [],\n    locations: [],\n    ui: {\n        filterPanelOpen: false,\n        resultPanelOpen: true,\n        searchLayerOpen: false,\n    },\n    searchTerm: '',\n    openedStore: null,\n    filters: {\n        continent: '',\n        country: '',\n        city: '',\n        coordinates: {\n            center: {\n                lat: '',\n                lng: ''\n            },\n            ne: {\n                lat: '',\n                lng: ''\n            },\n            sw: {\n                lat: '',\n                lng: ''\n            }\n        },\n        storeTypes: []\n    }\n}"],"sourceRoot":""}