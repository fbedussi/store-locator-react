(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(32)},28:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),s=n(14),o=n.n(s),a=n(9),l=n(15),c=n(4),u=n(7),h=function(e){return{type:"UPDATE_SEARCH_TERM",searchTerm:e}},p=function(e){return{type:"OPEN_STORE_DETAILS",store:e}},m={"store-type":{action:function(e){return{type:"SET_STORE_TYPES",storeTypes:e}},formatValue:function(e){return e[0].split(",")}},search:{action:h,formatValue:function(e){return e[0]}}},d=Object.keys(m);function g(e,t){var n=new RegExp("(".concat(e,"/.+)(").concat(d.join("|"),")?"));window.location.hash=window.location.hash.replace(n,"$2"),"#"===window.location.hash&&(window.location.hash="");var r=window.location.hash.length?"/":"#",i=t.length?"".concat(window.location.hash).concat(r).concat(e,"/").concat(t):"";window.history.pushState({},"",i)}function f(e){return function(t){return t.visible=t.location.some(function(t){return t.toLowerCase().includes(e.toLowerCase())}),t}}function _(e){return function(t){return t.visible=!e.storeTypes.length||t.storeTypes.some(function(t){return e.storeTypes.includes(t.id)}),t}}var y=function(e,t){switch(t.type){case"LOAD_STORES":return Object(u.a)({},e,{stores:t.stores.map(_(e.filters)).map(f(e.searchTerm))});case"LOAD_STORE_TYPES":return Object(u.a)({},e,{storeTypes:t.storeTypes});case"LOAD_LOCATIONS":return Object(u.a)({},e,{locations:t.locations});case"UPDATE_SEARCH_TERM":return Object(u.a)({},e,{searchTerm:t.searchTerm,stores:e.stores.map(f(t.searchTerm))});case"TOGGLE_FILTER_PANEL":return Object(u.a)({},e,{ui:Object(u.a)({},e.ui,{filterPanelOpen:!e.ui.filterPanelOpen})});case"SET_STORE_TYPES":var n=Object(u.a)({},e.filters,{storeTypes:t.storeTypes});return Object(u.a)({},e,{stores:e.stores.map(_(n)),filters:n});case"TOGGLE_STORE_TYPE":var r=Object(u.a)({},e.filters,{storeTypes:(a=e.filters.storeTypes,l=t.storeTypeId,a.includes(l)?a.filter(function(e){return e!==l}):a.concat(l))});return g("store-type",r.storeTypes.join(",")),Object(u.a)({},e,{stores:e.stores.map(_(r)),filters:r});case"RESET_FILTERS":var i=Object(u.a)({},e.filters,{storeTypes:[]});return g("store-type",""),Object(u.a)({},e,{stores:e.stores.map(_(i)),filters:i});case"OPEN_STORE_DETAILS":return Object(u.a)({},e,{openedStore:t.store});case"UPDATE_COORDS":return g("coords",""),g("coords","".concat(t.coords.center.lat,",").concat(t.coords.center.lng,"/ne/").concat(t.coords.ne.lat,",").concat(t.coords.ne.lng,"/sw/").concat(t.coords.sw.lat,",").concat(t.coords.sw.lng)),Object(u.a)({},e,{coordinates:t.coords,stores:e.stores.map((s=t.coords.ne,o=t.coords.sw,function(e){return e.visible=s.lat>=e.lat&&e.lat>=o.lat&&s.lng>=e.lng&&e.lng>=o.lng,e}))});case"TOGGLE_SEARCH_LAYER":return Object(u.a)({},e,{ui:Object(u.a)({},e.ui,{searchLayerOpen:!e.ui.searchLayerOpen})});default:return e}var s,o,a,l},v=(n(28),n(1)),w=n(2),E=n(5),k=n(3),b=n(6),x=(n(30),function(){return i.a.createElement("svg",{className:"searchIcon",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64"},i.a.createElement("g",null,i.a.createElement("circle",{fill:"none",strokeWidth:"2",strokeMiterlimit:"10",cx:"21",cy:"21",r:"20"}),i.a.createElement("line",{fill:"none",strokeWidth:"2",strokeMiterlimit:"10",x1:"35",y1:"35",x2:"41",y2:"41"}),i.a.createElement("rect",{x:"46.257",y:"37.065",transform:"matrix(-0.7071 0.7071 -0.7071 -0.7071 121.9178 50.5)",fill:"none",stroke:"#000000",strokeWidth:"2",strokeMiterlimit:"10",width:"8.485",height:"26.87"})))}),T=function(e){function t(){return Object(v.a)(this,t),Object(E.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props.toggleSearchLayer;return i.a.createElement("button",{className:"searchOpener",onClick:function(){return e()}},i.a.createElement("span",{className:"icon"},i.a.createElement(x,null)),i.a.createElement("span",{className:"text visuallyHidden"},"Search"))}}]),t}(r.Component),S=Object(c.b)(function(e){return{}},function(e){return{toggleSearchLayer:function(){return e({type:"TOGGLE_SEARCH_LAYER"})}}})(T),M=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(E.a)(this,Object(k.a)(t).call(this,e))).oldSuggestions=[],n}return Object(b.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props,t=e.searchTerm,n=e.locations,r=e.updateSearchTerm,s=t.length>2?n.filter(function(e){return e.name.toLowerCase().includes(t.toLowerCase())}):[],o=Boolean(s.length),a=o?s:this.oldSuggestions;return this.oldSuggestions=s,i.a.createElement("ul",{style:{display:"".concat(o?"block":"none")}},a.map(function(e,t){return i.a.createElement("li",{key:t,onClick:function(){return r(e.name)}},e.name)}))}}]),t}(r.Component),C=Object(c.b)(function(e){return{searchTerm:e.searchTerm,locations:e.locations}},function(e){return{updateSearchTerm:function(t){return e(h(t))}}})(M),O=function(e){var t=e.icon,n=e.label,r=e.clickHandler,s=e.cssClass;return i.a.createElement("button",{className:"iconButton".concat(s?" "+s:""),onClick:r},i.a.createElement("span",{className:"icon"},t()),i.a.createElement("span",{className:"visuallyHidden"},n))},I=function(){return i.a.createElement("svg",{width:"64px",height:"64px",viewBox:"0 0 64 64"},i.a.createElement("g",null,i.a.createElement("line",{fill:"none",strokeWidth:"2",strokeMiterlimit:"10",x1:"18.947",y1:"17.153",x2:"45.045",y2:"43.056"})),i.a.createElement("g",null,i.a.createElement("line",{fill:"none",strokeWidth:"2",strokeMiterlimit:"10",x1:"19.045",y1:"43.153",x2:"44.947",y2:"17.056"})))},L=function(){return i.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64"},i.a.createElement("g",null,i.a.createElement("circle",{fill:"none",strokeWidth:"2",strokeMiterlimit:"10",cx:"32",cy:"22",r:"6"}),i.a.createElement("path",{fill:"none",strokeWidth:"2",strokeMiterlimit:"10",d:"M53,22.735C52.948,10.73,43.599,1,32,1s-21,9.73-21,21.735C11,38.271,31.965,63,31.965,63S53.069,38.271,53,22.735z"})))},j=function(e){function t(){return Object(v.a)(this,t),Object(E.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this,t=this.props.searchTerm;return i.a.createElement("div",{className:"SearchBox"},i.a.createElement("div",{className:"searchInputAndButtons"},i.a.createElement("label",{htmlFor:"searchInput",className:"visuallyHidden"},"Cerca un negozio"),i.a.createElement("div",{className:"searchInputAndIcons"},i.a.createElement(x,null),i.a.createElement("div",{className:"searchInput"},i.a.createElement("input",{id:"searchInput",type:"text",placeholder:"Inserisci una localit\xe0",onInput:function(t){return e.handleInput(t)},value:t}),i.a.createElement(C,null)),i.a.createElement(O,{icon:I,label:"clear search",clickHandler:function(t){return e.handleReset(t)},cssclassName:"clearSearch"})),i.a.createElement(O,{icon:L,label:"geolocate me",clickHandler:function(t){return e.handleReset(t)},cssclassName:"btn geolocalizeIcon"})))}},{key:"handleInput",value:function(e){this.props.updateSearchTerm(e.target.value)}},{key:"handleReset",value:function(){this.props.updateSearchTerm("")}}]),t}(r.Component),N=Object(c.b)(function(e){return{}},function(e){return{updateSearchTerm:function(t){return e(h(t))}}})(j),A=function(e){function t(){return Object(v.a)(this,t),Object(E.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props.stores.filter(function(e){return e.visible}).length,t="No store found, check che search query";switch(e){case 1:t="1 store found";break;default:t="".concat(e," stores found")}return i.a.createElement("div",{className:"resultsNumber"},i.a.createElement("div",null,t))}}]),t}(r.Component),P=Object(c.b)(function(e){return{stores:e.stores}},function(e){return{}})(A),z=function(){return i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64px",height:"64px",viewBox:"0 0 64 64"},i.a.createElement("g",null,i.a.createElement("polyline",{fill:"none",strokeWidth:"2",strokeLinejoin:"bevel",strokeMiterlimit:"10",points:"15,24 32,41 49,24 \t"})))},R=function(){return i.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64"},i.a.createElement("g",null,i.a.createElement("line",{fill:"none",strokeWidth:"2",strokeMiterlimit:"10",x1:"18.947",y1:"17.153",x2:"45.045",y2:"43.056"})),i.a.createElement("g",null,i.a.createElement("line",{fill:"none",strokeWidth:"2",strokeMiterlimit:"10",x1:"19.045",y1:"43.153",x2:"44.947",y2:"17.056"})),i.a.createElement("g",null,i.a.createElement("circle",{fill:"none",strokeWidth:"2",strokeMiterlimit:"10",cx:"32",cy:"32",r:"30.999"})))},B=function(e){function t(){return Object(v.a)(this,t),Object(E.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props,t=e.storeTypes,n=e.filterPanelOpen,r=e.selectedStoreTypesId,s=e.toggleFilterPanel,o=e.toggleStoreType,a=e.resetStoreTypes;return i.a.createElement("div",{className:"filterPanel"},i.a.createElement("div",{className:"filter-bar_header"},i.a.createElement("button",{className:"filter-panel_toggleBtn".concat(n?" open":""),onClick:function(){return s()}},i.a.createElement("span",{className:"filter-panel_toggleBtn_text"},"Filter results"),i.a.createElement("span",{className:"icon filter-panel_arrow"},i.a.createElement(z,null))),i.a.createElement("button",{className:"btn filter-panel_resetBtn ".concat(n?"fade-in":"fade-out"),onClick:function(){return a()}},i.a.createElement("span",{className:"removeIcon"},i.a.createElement(R,null)),i.a.createElement("span",{className:"text"},"reset filters"))),i.a.createElement("div",null,i.a.createElement("ul",{style:{display:"".concat(n?"block":"none")}},t.map(function(e,t){var n=r.includes(e.id);return i.a.createElement("li",{key:t},i.a.createElement("button",{className:"storeTypeBtn",onClick:function(){return o(e.id)}},n?i.a.createElement("span",{className:"icon"},i.a.createElement(I,null)):null,i.a.createElement("span",{className:"text"},e.name)))}))))}},{key:"handleReset",value:function(){this.props.resetStoreTypesAction()}}]),t}(r.Component),D=Object(c.b)(function(e){return{storeTypes:e.storeTypes,filterPanelOpen:e.ui.filterPanelOpen,selectedStoreTypesId:e.filters.storeTypes}},function(e){return{resetStoreTypes:function(){return e({type:"RESET_FILTERS"})},toggleStoreType:function(t){return e({type:"TOGGLE_STORE_TYPE",storeTypeId:t})},toggleFilterPanel:function(){return e({type:"TOGGLE_FILTER_PANEL"})}}})(B),Z=function(){return i.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64"},i.a.createElement("g",null,i.a.createElement("polyline",{fill:"none",strokeWidth:"2",strokeLinejoin:"bevel",strokeMiterlimit:"10",points:"27,15 44,32  27,49"})))},W=function(){return i.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64"},i.a.createElement("g",null,i.a.createElement("rect",{x:"16",y:"1",fill:"none",strokeWidth:"2",strokeMiterlimit:"10",width:"32",height:"62"}),i.a.createElement("line",{fill:"none",strokeWidth:"2",strokeMiterlimit:"10",x1:"28",y1:"5",x2:"36",y2:"5"}),i.a.createElement("line",{fill:"none",strokeWidth:"2",strokeMiterlimit:"10",x1:"16",y1:"51",x2:"48",y2:"51"}),i.a.createElement("line",{fill:"none",strokeWidth:"2",strokeMiterlimit:"10",x1:"16",y1:"9",x2:"48",y2:"9"}),i.a.createElement("circle",{fill:"none",strokeWidth:"2",strokeLinejoin:"bevel",strokeMiterlimit:"10",cx:"32",cy:"57",r:"2"})))},H=function(e){function t(){return Object(v.a)(this,t),Object(E.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this.props,t=e.stores,n=e.openStoreDetails;return i.a.createElement("ul",{className:"storesList"},t.filter(function(e){return e.visible}).map(function(e,t){return i.a.createElement("li",{key:t,style:(r=t,{borderTop:0===r?": solid 1px lightgray":"none",borderBottom:"solid 1px lightgray",padding:"1em 0",display:"flex",justifyContent:"space-between"}),onClick:function(){return n(e)}},i.a.createElement("div",null,i.a.createElement("div",{className:"storeName"},e.name),i.a.createElement("div",{className:"storePhone"},i.a.createElement("span",{className:"icon"},i.a.createElement(W,null)),i.a.createElement("span",{className:"text"},e.phone))),i.a.createElement("div",null,i.a.createElement(Z,null)));var r}))}}]),t}(r.Component),G=Object(c.b)(function(e){return{stores:e.stores}},function(e){return{openStoreDetails:function(t){return e(p(t))}}})(H),F=function(e){var t=e.cssClasses;return i.a.createElement("svg",{className:t,version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64"},i.a.createElement("g",null,i.a.createElement("polyline",{fill:"none",strokeWidth:"2",strokeLinejoin:"bevel",strokeMiterlimit:"10",points:"37,15 20,32 37,49"})))},V=function(){return i.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64"},i.a.createElement("g",null,i.a.createElement("rect",{x:"1",y:"13",fill:"none",strokeWidth:"2",strokeMiterlimit:"10",width:"62",height:"37"}),i.a.createElement("polyline",{fill:"none",strokeWidth:"2",strokeMiterlimit:"10",points:"1,13 32,33 63,13 \t"})))},U=function(e){var t=e.store;return i.a.createElement("div",{className:"store"},i.a.createElement("div",{className:"store_name"},t.name),i.a.createElement("div",{className:"store_phone"},i.a.createElement("span",{className:"icon"},i.a.createElement(W,null)),i.a.createElement("span",{className:"text"},t.phone)),i.a.createElement("div",{className:"store_mail"},i.a.createElement("span",{className:"icon"},i.a.createElement(V,null)),i.a.createElement("span",{className:"text"},i.a.createElement("a",{href:"mailto:".concat(t.mail)},t.mail))),i.a.createElement("div",{className:"store_categoriesTitle"},"Store categories"),i.a.createElement("ul",{className:"store_categories"},t.productCategory.map(function(e,t){return i.a.createElement("li",{key:t},e.name)})),i.a.createElement("div",{className:"store_servicesTitle"},"Store services"),i.a.createElement("ul",{className:"store_services"},t.hasMadeToMeasure?i.a.createElement("li",null,"Made to measure"):null,t.hasTailoring?i.a.createElement("li",null,"Tailoring"):null,t.gifCardAccepted?i.a.createElement("li",null,"Gift card accepted"):null,t.hasWiFi?i.a.createElement("li",null,"Wi-Fi"):null,t.reserveInStore?i.a.createElement("li",null,"Reserve in store"):null,t.pickUpInStore?i.a.createElement("li",null,"Pick-up in store"):null,t.returnInStore?i.a.createElement("li",null,"Return in store"):null,t.clickFromStore?i.a.createElement("li",null,"Click from store"):null,t.bookable?i.a.createElement("li",null,"Bookable"):null))},Y=function(e){function t(){return Object(v.a)(this,t),Object(E.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this,t=this.props.store;return i.a.createElement("div",{className:"storeDetails ".concat(Boolean(t)?"slide-in-left":"slide-out-right")},i.a.createElement("button",{className:"backButton",onClick:function(){return e.props.closeStoreDetails()}},i.a.createElement("span",{className:"backIcon"},i.a.createElement(F,null)),i.a.createElement("span",{className:"text"},"close")),t?i.a.createElement(U,{store:t}):null)}}]),t}(r.Component),X=Object(c.b)(function(e){return{store:e.openedStore}},function(e){return{closeStoreDetails:function(){return e(p(null))}}})(Y),$=function(e){function t(e){var n;return Object(v.a)(this,t),(n=Object(E.a)(this,Object(k.a)(t).call(this,e))).state={touchStart:0},n}return Object(b.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggleSearchLayer,r=t.searchLayerOpen;return i.a.createElement("div",{className:"leftPanel ".concat(r?"open":""),onTouchStart:function(t){return e.setState({touchStart:t.touches[0].clientX})},onTouchEnd:function(t){e.state.touchStart-t.changedTouches[0].clientX>100&&n()}},i.a.createElement(N,null),i.a.createElement(P,null),i.a.createElement(D,null),i.a.createElement("div",{className:"storesAndStoreDetails"},i.a.createElement(G,null),i.a.createElement(X,null)))}}]),t}(r.Component),q=Object(c.b)(function(e){return{searchLayerOpen:e.ui.searchLayerOpen}},function(e){return{toggleSearchLayer:function(){return e({type:"TOGGLE_SEARCH_LAYER"})}}})($);function J(e,t){e.getMarkerClusterer().extend(J,window.google.maps.OverlayView),this.cluster_=e,this.className_=e.getMarkerClusterer().getClusterClass(),this.styles_=t,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(e.getMap())}function K(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinimumClusterSize(),this.averageCenter_=e.getAverageCenter(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new J(this,e.getStyles())}function Q(e,t,n){this.extend(Q,window.google.maps.OverlayView),t=t||[],n=n||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=n.gridSize||60,this.minClusterSize_=n.minimumClusterSize||2,this.maxZoom_=n.maxZoom||null,this.styles_=n.styles||[],this.title_=n.title||"",this.zoomOnClick_=!0,void 0!==n.zoomOnClick&&(this.zoomOnClick_=n.zoomOnClick),this.averageCenter_=!1,void 0!==n.averageCenter&&(this.averageCenter_=n.averageCenter),this.ignoreHidden_=!1,void 0!==n.ignoreHidden&&(this.ignoreHidden_=n.ignoreHidden),this.enableRetinaIcons_=!1,void 0!==n.enableRetinaIcons&&(this.enableRetinaIcons_=n.enableRetinaIcons),this.imagePath_=n.imagePath||Q.IMAGE_PATH,this.imageExtension_=n.imageExtension||Q.IMAGE_EXTENSION,this.imageSizes_=n.imageSizes||Q.IMAGE_SIZES,this.calculator_=n.calculator||Q.CALCULATOR,this.batchSize_=n.batchSize||Q.BATCH_SIZE,this.batchSizeIE_=n.batchSizeIE||Q.BATCH_SIZE_IE,this.clusterClass_=n.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(t,!0),this.setMap(e)}J.prototype.onAdd=function(){var e,t,n=this,r=window.google.maps.version.split(".");r=parseInt(100*r[0],10)+parseInt(r[1],10),this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=window.google.maps.event.addListener(this.getMap(),"bounds_changed",function(){t=e}),window.google.maps.event.addDomListener(this.div_,"mousedown",function(){e=!0,t=!1}),r>=332&&window.google.maps.event.addDomListener(this.div_,"touchstart",function(e){e.stopPropagation()}),window.google.maps.event.addDomListener(this.div_,"click",function(r){if(e=!1,!t){var i,s,o=n.cluster_.getMarkerClusterer();window.google.maps.event.trigger(o,"click",n.cluster_),window.google.maps.event.trigger(o,"clusterclick",n.cluster_),o.getZoomOnClick()&&(s=o.getMaxZoom(),i=n.cluster_.getBounds(),o.getMap().fitBounds(i),setTimeout(function(){o.getMap().fitBounds(i),null!==s&&o.getMap().getZoom()>s&&o.getMap().setZoom(s+1)},100)),r.cancelBubble=!0,r.stopPropagation&&r.stopPropagation()}}),window.google.maps.event.addDomListener(this.div_,"mouseover",function(){var e=n.cluster_.getMarkerClusterer();window.google.maps.event.trigger(e,"mouseover",n.cluster_)}),window.google.maps.event.addDomListener(this.div_,"mouseout",function(){var e=n.cluster_.getMarkerClusterer();window.google.maps.event.trigger(e,"mouseout",n.cluster_)})},J.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),window.google.maps.event.removeListener(this.boundsChangedListener_),window.google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},J.prototype.draw=function(){if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.top=e.y+"px",this.div_.style.left=e.x+"px",this.div_.style.zIndex=window.google.maps.Marker.MAX_ZINDEX+1}},J.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},J.prototype.show=function(){if(this.div_){var e="",t=this.backgroundPosition_.split(" "),n=parseInt(t[0].replace(/^\s+|\s+$/g,""),10),r=parseInt(t[1].replace(/^\s+|\s+$/g,""),10),i=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(i),e="<img src='"+this.url_+"' style='position: absolute; top: "+r+"px; left: "+n+"px; ",this.cluster_.getMarkerClusterer().enableRetinaIcons_?e+="width: "+this.width_+"px; height: "+this.height_+"px;":e+="clip: rect("+-1*r+"px, "+(-1*n+this.width_)+"px, "+(-1*r+this.height_)+"px, "+-1*n+"px);",e+="'>",this.div_.innerHTML=e+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>","undefined"===typeof this.sums_.title||""===this.sums_.title?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},J.prototype.useStyle=function(e){this.sums_=e;var t=Math.max(0,e.index-1);t=Math.min(this.styles_.length-1,t);var n=this.styles_[t];this.url_=n.url,this.height_=n.height,this.width_=n.width,this.anchorText_=n.anchorText||[0,0],this.anchorIcon_=n.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=n.textColor||"black",this.textSize_=n.textSize||11,this.textDecoration_=n.textDecoration||"none",this.fontWeight_=n.fontWeight||"bold",this.fontStyle_=n.fontStyle||"normal",this.fontFamily_=n.fontFamily||"Arial,sans-serif",this.backgroundPosition_=n.backgroundPosition||"0 0"},J.prototype.setCenter=function(e){this.center_=e},J.prototype.createCss=function(e){var t=[];return t.push("cursor: pointer;"),t.push("position: absolute; top: "+e.y+"px; left: "+e.x+"px;"),t.push("width: "+this.width_+"px; height: "+this.height_+"px;"),t.push("-webkit-user-select: none;"),t.push("-khtml-user-select: none;"),t.push("-moz-user-select: none;"),t.push("-o-user-select: none;"),t.push("user-select: none;"),t.join("")},J.prototype.getPosFromLatLng_=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return t.x-=this.anchorIcon_[1],t.y-=this.anchorIcon_[0],t.x=parseInt(t.x,10),t.y=parseInt(t.y,10),t},K.prototype.getSize=function(){return this.markers_.length},K.prototype.getMarkers=function(){return this.markers_},K.prototype.getCenter=function(){return this.center_},K.prototype.getMap=function(){return this.map_},K.prototype.getMarkerClusterer=function(){return this.markerClusterer_},K.prototype.getBounds=function(){var e,t=new window.google.maps.LatLngBounds(this.center_,this.center_),n=this.getMarkers();for(e=0;e<n.length;e++)t.extend(n[e].getPosition());return t},K.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},K.prototype.addMarker=function(e){var t,n,r;if(this.isMarkerAlreadyAdded_(e))return!1;if(this.center_){if(this.averageCenter_){var i=this.markers_.length+1,s=(this.center_.lat()*(i-1)+e.getPosition().lat())/i,o=(this.center_.lng()*(i-1)+e.getPosition().lng())/i;this.center_=new window.google.maps.LatLng(s,o),this.calculateBounds_()}}else this.center_=e.getPosition(),this.calculateBounds_();if(e.isAdded=!0,this.markers_.push(e),n=this.markers_.length,null!==(r=this.markerClusterer_.getMaxZoom())&&this.map_.getZoom()>r)e.getMap()!==this.map_&&e.setMap(this.map_);else if(n<this.minClusterSize_)e.getMap()!==this.map_&&e.setMap(this.map_);else if(n===this.minClusterSize_)for(t=0;t<n;t++)this.markers_[t].setMap(null);else e.setMap(null);return this.updateIcon_(),!0},K.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},K.prototype.calculateBounds_=function(){var e=new window.google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(e)},K.prototype.updateIcon_=function(){var e=this.markers_.length,t=this.markerClusterer_.getMaxZoom();if(null!==t&&this.map_.getZoom()>t)this.clusterIcon_.hide();else if(e<this.minClusterSize_)this.clusterIcon_.hide();else{var n=this.markerClusterer_.getStyles().length,r=this.markerClusterer_.getCalculator()(this.markers_,n);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(r),this.clusterIcon_.show()}},K.prototype.isMarkerAlreadyAdded_=function(e){var t;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(e);for(t=0;t<this.markers_.length;t++)if(e===this.markers_[t])return!0;return!1},Q.prototype.onAdd=function(){var e=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.prevZoom_=this.getMap().getZoom(),this.listeners_=[window.google.maps.event.addListener(this.getMap(),"zoom_changed",function(){var e=this.getMap().getZoom(),t=this.getMap().minZoom||0,n=Math.min(this.getMap().maxZoom||100,this.getMap().mapTypes[this.getMap().getMapTypeId()].maxZoom);e=Math.min(Math.max(e,t),n),this.prevZoom_!=e&&(this.prevZoom_=e,this.resetViewport_(!1))}.bind(this)),window.google.maps.event.addListener(this.getMap(),"idle",function(){e.redraw_()})]},Q.prototype.onRemove=function(){var e;for(e=0;e<this.markers_.length;e++)this.markers_[e].getMap()!==this.activeMap_&&this.markers_[e].setMap(this.activeMap_);for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();for(this.clusters_=[],e=0;e<this.listeners_.length;e++)window.google.maps.event.removeListener(this.listeners_[e]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},Q.prototype.draw=function(){},Q.prototype.setupStyles_=function(){var e,t;if(!(this.styles_.length>0))for(e=0;e<this.imageSizes_.length;e++)t=this.imageSizes_[e],this.styles_.push({url:this.imagePath_+(e+1)+"."+this.imageExtension_,height:t,width:t})},Q.prototype.fitMapToMarkers=function(){var e,t=this.getMarkers(),n=new window.google.maps.LatLngBounds;for(e=0;e<t.length;e++)!t[e].getVisible()&&this.getIgnoreHidden()||n.extend(t[e].getPosition());this.getMap().fitBounds(n)},Q.prototype.getGridSize=function(){return this.gridSize_},Q.prototype.setGridSize=function(e){this.gridSize_=e},Q.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},Q.prototype.setMinimumClusterSize=function(e){this.minClusterSize_=e},Q.prototype.getMaxZoom=function(){return this.maxZoom_},Q.prototype.setMaxZoom=function(e){this.maxZoom_=e},Q.prototype.getStyles=function(){return this.styles_},Q.prototype.setStyles=function(e){this.styles_=e},Q.prototype.getTitle=function(){return this.title_},Q.prototype.setTitle=function(e){this.title_=e},Q.prototype.getZoomOnClick=function(){return this.zoomOnClick_},Q.prototype.setZoomOnClick=function(e){this.zoomOnClick_=e},Q.prototype.getAverageCenter=function(){return this.averageCenter_},Q.prototype.setAverageCenter=function(e){this.averageCenter_=e},Q.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},Q.prototype.setIgnoreHidden=function(e){this.ignoreHidden_=e},Q.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},Q.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons_=e},Q.prototype.getImageExtension=function(){return this.imageExtension_},Q.prototype.setImageExtension=function(e){this.imageExtension_=e},Q.prototype.getImagePath=function(){return this.imagePath_},Q.prototype.setImagePath=function(e){this.imagePath_=e},Q.prototype.getImageSizes=function(){return this.imageSizes_},Q.prototype.setImageSizes=function(e){this.imageSizes_=e},Q.prototype.getCalculator=function(){return this.calculator_},Q.prototype.setCalculator=function(e){this.calculator_=e},Q.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},Q.prototype.setBatchSizeIE=function(e){this.batchSizeIE_=e},Q.prototype.getClusterClass=function(){return this.clusterClass_},Q.prototype.setClusterClass=function(e){this.clusterClass_=e},Q.prototype.getMarkers=function(){return this.markers_},Q.prototype.getTotalMarkers=function(){return this.markers_.length},Q.prototype.getClusters=function(){return this.clusters_},Q.prototype.getTotalClusters=function(){return this.clusters_.length},Q.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw_()},Q.prototype.addMarkers=function(e,t){var n;for(n in e)e.hasOwnProperty(n)&&this.pushMarkerTo_(e[n]);t||this.redraw_()},Q.prototype.pushMarkerTo_=function(e){if(e.getDraggable()){var t=this;window.google.maps.event.addListener(e,"dragend",function(){t.ready_&&(this.isAdded=!1,t.repaint())})}e.isAdded=!1,this.markers_.push(e)},Q.prototype.removeMarker=function(e,t){var n=this.removeMarker_(e);return!t&&n&&this.repaint(),n},Q.prototype.removeMarkers=function(e,t){var n,r,i=!1;for(n=0;n<e.length;n++)r=this.removeMarker_(e[n]),i=i||r;return!t&&i&&this.repaint(),i},Q.prototype.removeMarker_=function(e){var t,n=-1;if(this.markers_.indexOf)n=this.markers_.indexOf(e);else for(t=0;t<this.markers_.length;t++)if(e===this.markers_[t]){n=t;break}return-1!==n&&(e.setMap(null),this.markers_.splice(n,1),!0)},Q.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},Q.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var t;for(t=0;t<e.length;t++)e[t].remove()},0)},Q.prototype.getExtendedBounds=function(e){var t=this.getProjection(),n=new window.google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()),r=new window.google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()),i=t.fromLatLngToDivPixel(n);i.x+=this.gridSize_,i.y-=this.gridSize_;var s=t.fromLatLngToDivPixel(r);s.x-=this.gridSize_,s.y+=this.gridSize_;var o=t.fromDivPixelToLatLng(i),a=t.fromDivPixelToLatLng(s);return e.extend(o),e.extend(a),e},Q.prototype.redraw_=function(){this.createClusters_(0)},Q.prototype.resetViewport_=function(e){var t,n;for(t=0;t<this.clusters_.length;t++)this.clusters_[t].remove();for(this.clusters_=[],t=0;t<this.markers_.length;t++)(n=this.markers_[t]).isAdded=!1,e&&n.setMap(null)},Q.prototype.distanceBetweenPoints_=function(e,t){var n=(t.lat()-e.lat())*Math.PI/180,r=(t.lng()-e.lng())*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},Q.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},Q.prototype.addToClosestCluster_=function(e){var t,n,r,i,s=4e4,o=null;for(t=0;t<this.clusters_.length;t++)(i=(r=this.clusters_[t]).getCenter())&&(n=this.distanceBetweenPoints_(i,e.getPosition()))<s&&(s=n,o=r);o&&o.isMarkerInClusterBounds(e)?o.addMarker(e):((r=new K(this)).addMarker(e),this.clusters_.push(r))},Q.prototype.createClusters_=function(e){var t,n,r,i=this;if(this.ready_){0===e&&(window.google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!==typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),r=this.getMap().getZoom()>3?new window.google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new window.google.maps.LatLngBounds(new window.google.maps.LatLng(85.02070771743472,-178.48388434375),new window.google.maps.LatLng(-85.08136444384544,178.00048865625));var s=this.getExtendedBounds(r),o=Math.min(e+this.batchSize_,this.markers_.length);for(t=e;t<o;t++)!(n=this.markers_[t]).isAdded&&this.isMarkerInBounds_(n,s)&&(!this.ignoreHidden_||this.ignoreHidden_&&n.getVisible())&&this.addToClosestCluster_(n);o<this.markers_.length?this.timerRefStatic=setTimeout(function(){i.createClusters_(o)},0):(delete this.timerRefStatic,window.google.maps.event.trigger(this,"clusteringend",this))}},Q.prototype.extend=function(e,t){return function(e){var t;for(t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},Q.CALCULATOR=function(e,t){for(var n=0,r=e.length.toString(),i=r;0!==i;)i=parseInt(i/10,10),n++;return{text:r,index:n=Math.min(n,t),title:""}},Q.BATCH_SIZE=2e3,Q.BATCH_SIZE_IE=500,Q.IMAGE_PATH="../images/m",Q.IMAGE_EXTENSION="png",Q.IMAGE_SIZES=[53,56,66,78,90];var ee=Q;var te=function(e){function t(){var e;return Object(v.a)(this,t),(e=Object(E.a)(this,Object(k.a)(t).call(this))).myRef=i.a.createRef(),e.map=null,e.markers=[],e}return Object(b.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=document.createElement("style");e.textContent="\n            :host {\n              position: relative;\n            }\n            .map {\n              position: relative;\n              width: 100%;\n              height: 100%;\n            }\n            .gm-bundled-control {\n                bottom: 69px!important;\n                right: 28px!important;\n            }\n            .gm-bundled-control > div > div {\n                width: 28px!important;\n                height: 55px!important;\n            }\n            .gm-bundled-control > div > div > div {\n                width: 24px!important;\n                margin: 0 3px!important;\n            }\n            .gm-bundled-control button {\n                width: 28px!important;\n                height: 27px!important;\n            }\n            .gm-bundled-control button img {\n                height: 12px!important;\n                width: 11px!important;\n                margin: 8px!important;\n            }\n        ",this.myRef.current.appendChild(e),this.mapElement=document.createElement("div"),this.mapElement.classList="map",this.myRef.current.appendChild(this.mapElement),window.initGoogleMap=this.init.bind(this);var t=document.createElement("script");t.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCRTnC96aFUTP62mNuxDBUoHcLvR35MLOI&callback=initGoogleMap",this.myRef.current.appendChild(t)}},{key:"bindEvents",value:function(){}},{key:"init",value:function(){this.map=new window.google.maps.Map(this.mapElement,{center:{lat:48.074766,lng:7.574985},fullscreenControl:!1,mapTypeControl:!1,streetViewControl:!1,styles:[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],zoom:4,zoomControl:!0,zoomControlOptions:{style:window.google.maps.ZoomControlStyle.SMALL}}),this.bindEvents()}},{key:"setMarkers",value:function(){var e=this;this.map&&(this.markers=this.stores.filter(function(e){return e.visible}).map(function(t){return new window.google.maps.Marker({map:e.map,position:{lat:Number(t.lat),lng:Number(t.lng)},title:t.post_title})}),this.markerCluster=new ee(this.map,this.markers,{gridSize:40,styles:[{url:"https://media.yoox.biz/ytos/resources/BALMAIN/Images/icons/pinmap-cluster.svg",width:35,height:35}]}))}},{key:"resetMarkers",value:function(){this.markerCluster&&this.markerCluster.clearMarkers(),this.markers.map(function(e){e.setMap(null)}),this.markers=[]}},{key:"render",value:function(){return this.stores=this.props.stores,this.resetMarkers(),this.setMarkers(),i.a.createElement("div",{className:"mapWrapper",ref:this.myRef})}}]),t}(r.Component),ne=Object(c.b)(function(e){return{stores:e.stores}},function(e){return{}})(te),re=function(e){function t(){return Object(v.a)(this,t),Object(E.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(S,null),i.a.createElement(q,null),i.a.createElement(ne,null))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ie(e){return"0"!==e}var se=Object(a.c)(y,{stores:[],storeTypes:[],locations:[],ui:{filterPanelOpen:!1,resultPanelOpen:!0,searchLayerOpen:!1},searchTerm:"",openedStore:null,filters:{continent:"",country:"",city:"",coordinates:{center:{lat:"",lng:""},ne:{lat:"",lng:""},sw:{lat:"",lng:""}},storeTypes:[]}},Object(a.a)(l.a));o.a.render(i.a.createElement(c.a,{store:se},i.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}),fetch("data/stores.json").then(function(e){return e.json()}).then(function(e){var t=e.map(function(e){return{id:String(e.ID)||"",name:e.post_title||"",address:e["wpcf-store-address"]||"",geolocationAddress:e["wpcf-store-geolocation-address"]||"",lat:e["_store-lat"]||"",lng:e["_store-lng"]||"",phone:e["wpcf-store-phone"]||"",mail:e["wpcf-store-email-storelocator"]||"",mails:e["wpcf-store-email"]||"",brand:e["wpcf-store-main-store-brand"]||"",classification:e["wpcf-store-type-classification"]||"",isFlagship:ie(e["wpcf-store-is-flagship"]),gifCardAccepted:ie(e["wpcf-store-gift-card-accepted"]),hasWiFi:ie(e["wpcf-store-has-wifi"]),hasMadeToMeasure:ie(e["wpcf-store-has-made-to-measure"]),hasTailoring:ie(e["wpcf-store-has-tailoring"]),bookable:ie(e["wpcf-store-bookable"]),checkAvailability:ie(e["wpcf-store-attr-check-availabilty"]),reserveInStore:ie(e["wpcf-store-attr-reserve-in-store"]),pickUpInStore:ie(e["wpcf-store-attr-pick-up-in-store"]),returnInStore:ie(e["wpcf-store-attr-return-in-store"]),clickFromStore:ie(e["wpcf-store-attr-click-from-store"]),gender:e.gender?e.gender.map(function(e){return{id:e.term_id,name:e.name}}):[],storeTypes:e["store-type"]?e["store-type"].map(function(e){return{id:String(e.term_id),name:e.name}}):[],productCategory:e["product-category"]?e["product-category"].map(function(e){return{id:e.id,name:e.name}}):[],location:e.location?Object.keys(e.location).map(function(t){return e.location[t].name}):[],visible:!0}});se.dispatch(function(e){return{type:"LOAD_STORES",stores:e}}(t))}),fetch("data/store-types.json").then(function(e){return e.json()}).then(function(e){var t=e.terms.map(function(e){return{id:String(e.term_id)||"",name:e.name||""}});se.dispatch(function(e){return{type:"LOAD_STORE_TYPES",storeTypes:e}}(t))}),fetch("data/locations.json").then(function(e){return e.json()}).then(function(e){var t=e.terms.map(function(e){return{id:String(e.term_id)||"",name:e.name||""}});se.dispatch(function(e){return{type:"LOAD_LOCATIONS",locations:e}}(t))})}},[[18,2,1]]]);
//# sourceMappingURL=main.8fa318a2.chunk.js.map